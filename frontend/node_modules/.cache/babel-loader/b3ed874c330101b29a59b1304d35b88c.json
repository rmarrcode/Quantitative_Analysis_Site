{"ast":null,"code":"import React from 'react';\nimport { Delaunay } from 'd3-delaunay'; //\n\nimport { translate } from '../utils/Utils';\nimport useChartContext from '../utils/chartContext';\nimport { line } from 'd3-shape';\nimport { getPrimaryGroupLength, getPrimaryLength } from '../seriesTypes/Bar';\nexport default function Voronoi() {\n  var _useChartContext = useChartContext(),\n      getOptions = _useChartContext.getOptions,\n      focusedDatumState = _useChartContext.focusedDatumState,\n      isInteractingState = _useChartContext.isInteractingState;\n\n  var setFocusedDatum = focusedDatumState[1];\n  var isInteracting = isInteractingState[0];\n\n  var _getOptions = getOptions(),\n      onFocusDatum = _getOptions.onFocusDatum,\n      onClickDatum = _getOptions.onClickDatum,\n      tooltip = _getOptions.tooltip,\n      primaryCursor = _getOptions.primaryCursor,\n      secondaryCursor = _getOptions.secondaryCursor,\n      showVoronoi = _getOptions.showVoronoi,\n      interactionMode = _getOptions.interactionMode;\n\n  var handleFocus = React.useCallback(function (datum) {\n    var _getOptions$onFocusDa, _getOptions2;\n\n    (_getOptions$onFocusDa = (_getOptions2 = getOptions()).onFocusDatum) == null ? void 0 : _getOptions$onFocusDa.call(_getOptions2, datum);\n    setFocusedDatum(datum);\n  }, [getOptions, setFocusedDatum]);\n  var needsVoronoi = isInteracting && (showVoronoi || onFocusDatum || onClickDatum || tooltip || primaryCursor || secondaryCursor);\n\n  if (!needsVoronoi) {\n    return null;\n  }\n\n  var props = {\n    handleFocus: handleFocus\n  };\n\n  if (interactionMode === 'closest') {\n    return /*#__PURE__*/React.createElement(SingleVoronoi, props);\n  }\n\n  return /*#__PURE__*/React.createElement(PrimaryVoronoi, props);\n}\n\nfunction PrimaryVoronoi(_ref) {\n  var handleFocus = _ref.handleFocus;\n\n  var _useChartContext2 = useChartContext(),\n      primaryAxis = _useChartContext2.primaryAxis,\n      secondaryAxes = _useChartContext2.secondaryAxes,\n      getOptions = _useChartContext2.getOptions,\n      gridDimensions = _useChartContext2.gridDimensions,\n      datumsByInteractionGroup = _useChartContext2.datumsByInteractionGroup;\n\n  var stackedVoronoi = secondaryAxes.length === 1 && secondaryAxes[0].stacked;\n  var useBarPx = secondaryAxes.every(function (d) {\n    return d.elementType === 'bar' && !d.stacked;\n  });\n  return React.useMemo(function () {\n    var preColumns = Array.from(datumsByInteractionGroup.entries()).map(function (_ref2) {\n      var _ = _ref2[0],\n          datums = _ref2[1];\n      return datums;\n    }).filter(function (datums) {\n      var datum = datums[0];\n\n      if (!datum) {\n        return;\n      }\n\n      var primaryValue = datum.primaryValue;\n      return primaryValue !== 'undefined' && primaryValue !== null;\n    }).sort(function (a, b) {\n      var aAxis = secondaryAxes.find(function (d) {\n        return d.id === a[0].secondaryAxisId;\n      });\n      var bAxis = secondaryAxes.find(function (d) {\n        return d.id === b[0].secondaryAxisId;\n      });\n      var aPx = getPrimary(a[0], primaryAxis, aAxis, useBarPx);\n      var bPx = getPrimary(b[0], primaryAxis, bAxis, useBarPx);\n      return aPx - bPx;\n    });\n\n    if (primaryAxis.isVertical) {\n      preColumns.reverse();\n    }\n\n    var columns = preColumns.map(function (datums, i, all) {\n      var _primaryAxis$scale$ra;\n\n      var datum = datums[0];\n      var prev = all[i - 1];\n      var next = all[i + 1];\n      var secondaryAxis = secondaryAxes.find(function (d) {\n        return d.id === datum.secondaryAxisId;\n      });\n      var primaryPx = getPrimary(datum, primaryAxis, secondaryAxis, useBarPx);\n      var range = (_primaryAxis$scale$ra = primaryAxis == null ? void 0 : primaryAxis.scale.range()) != null ? _primaryAxis$scale$ra : [0, 0];\n      var primaryStart = range[0],\n          primaryEnd = range[1];\n\n      if (prev) {\n        var _secondaryAxis = secondaryAxes.find(function (d) {\n          return d.id === prev[0].secondaryAxisId;\n        });\n\n        var prevPx = getPrimary(prev[0], primaryAxis, _secondaryAxis, useBarPx);\n        primaryStart = primaryPx - (primaryPx - prevPx) / 2;\n      }\n\n      if (next) {\n        var _secondaryAxis2 = secondaryAxes.find(function (d) {\n          return d.id === next[0].secondaryAxisId;\n        });\n\n        var nextPx = getPrimary(next[0], primaryAxis, _secondaryAxis2, useBarPx);\n        primaryEnd = primaryPx + (nextPx - primaryPx) / 2;\n      }\n\n      return {\n        primaryStart: primaryStart,\n        primaryEnd: primaryEnd,\n        primaryPx: primaryPx,\n        datumBoundaries: datums.filter(function (datum) {\n          var secondaryValue = datum.secondaryValue;\n          return typeof secondaryValue !== 'undefined' && secondaryValue !== null;\n        }).map(function (datum, i, all) {\n          var _secondaryAxis$scale3, _datum$stackData3, _secondaryAxis$scale$2;\n\n          var prev = all[i - 1];\n          var next = all[i + 1];\n          var secondaryAxis = secondaryAxes.find(function (d) {\n            return d.id === datum.secondaryAxisId;\n          });\n\n          if (stackedVoronoi) {\n            var _secondaryAxis$scale$, _datum$stackData, _datum$stackData2;\n\n            var _range = (_secondaryAxis$scale$ = secondaryAxis == null ? void 0 : secondaryAxis.scale.range()) != null ? _secondaryAxis$scale$ : [0, 0];\n\n            var stackData = [(_datum$stackData = datum.stackData) == null ? void 0 : _datum$stackData[0], (_datum$stackData2 = datum.stackData) == null ? void 0 : _datum$stackData2[1]];\n\n            if (secondaryAxis != null && secondaryAxis.isVertical) {\n              _range.reverse();\n\n              stackData.reverse();\n            }\n\n            var _secondaryStart = _range[0],\n                _secondaryEnd = _range[1];\n\n            if (prev) {\n              var _secondaryAxis$scale, _stackData$;\n\n              _secondaryStart = (_secondaryAxis$scale = secondaryAxis == null ? void 0 : secondaryAxis.scale((_stackData$ = stackData[0]) != null ? _stackData$ : NaN)) != null ? _secondaryAxis$scale : NaN;\n            }\n\n            if (next) {\n              var _secondaryAxis$scale2, _stackData$2;\n\n              _secondaryEnd = (_secondaryAxis$scale2 = secondaryAxis == null ? void 0 : secondaryAxis.scale((_stackData$2 = stackData[1]) != null ? _stackData$2 : NaN)) != null ? _secondaryAxis$scale2 : NaN;\n            }\n\n            return {\n              secondaryStart: _secondaryStart,\n              secondaryEnd: _secondaryEnd,\n              datum: datum\n            };\n          }\n\n          var value = (_secondaryAxis$scale3 = secondaryAxis == null ? void 0 : secondaryAxis.scale(secondaryAxis.stacked ? (_datum$stackData3 = datum.stackData) == null ? void 0 : _datum$stackData3[1] : datum.secondaryValue)) != null ? _secondaryAxis$scale3 : NaN;\n          var range = (_secondaryAxis$scale$2 = secondaryAxis == null ? void 0 : secondaryAxis.scale.range()) != null ? _secondaryAxis$scale$2 : [0, 0];\n\n          if (secondaryAxis != null && secondaryAxis.isVertical) {\n            range.reverse();\n          }\n\n          var secondaryStart = range[0],\n              secondaryEnd = range[1];\n\n          if (prev) {\n            var _prevAxis$scale, _prev$stackData;\n\n            var prevAxis = secondaryAxes.find(function (d) {\n              return d.id === (prev == null ? void 0 : prev.secondaryAxisId);\n            });\n            var prevValue = (_prevAxis$scale = prevAxis == null ? void 0 : prevAxis.scale(prevAxis.stacked ? (_prev$stackData = prev.stackData) == null ? void 0 : _prev$stackData[1] : prev.secondaryValue)) != null ? _prevAxis$scale : NaN;\n            secondaryStart = value - (value - prevValue) / 2;\n          }\n\n          if (next) {\n            var _nextAxis$scale, _next$stackData;\n\n            var nextAxis = secondaryAxes.find(function (d) {\n              return d.id === (next == null ? void 0 : next.secondaryAxisId);\n            });\n            var nextValue = (_nextAxis$scale = nextAxis == null ? void 0 : nextAxis.scale(nextAxis.stacked ? (_next$stackData = next.stackData) == null ? void 0 : _next$stackData[1] : next.secondaryValue)) != null ? _nextAxis$scale : NaN;\n            secondaryEnd = value + (nextValue - value) / 2;\n          }\n\n          return {\n            secondaryStart: secondaryStart,\n            secondaryEnd: secondaryEnd,\n            datum: datum\n          };\n        })\n      };\n    });\n    return /*#__PURE__*/React.createElement(\"g\", {\n      onMouseLeave: function onMouseLeave() {\n        return handleFocus(null);\n      },\n      style: {\n        transform: translate(gridDimensions.left, gridDimensions.top)\n      }\n    }, columns.map(function (column, i) {\n      return /*#__PURE__*/React.createElement(\"g\", {\n        key: column.primaryPx + \"_\" + i\n      }, column.datumBoundaries.map(function (datumBoundary, i) {\n        var x1 = !primaryAxis.isVertical ? column.primaryStart : datumBoundary.secondaryStart;\n        var x2 = !primaryAxis.isVertical ? column.primaryEnd : datumBoundary.secondaryEnd;\n        var y1 = !primaryAxis.isVertical ? datumBoundary.secondaryStart : column.primaryStart;\n        var y2 = !primaryAxis.isVertical ? datumBoundary.secondaryEnd : column.primaryEnd;\n        var x = Math.min(x1, x2);\n        var y = Math.min(y1, y2);\n        var xEnd = Math.max(x1, x2);\n        var yEnd = Math.max(y1, y2);\n        var height = Math.max(yEnd - y, 0);\n        var width = Math.max(xEnd - x, 0);\n        return /*#__PURE__*/React.createElement(\"rect\", {\n          key: i,\n          x: x,\n          y: y,\n          width: width,\n          height: height,\n          className: 'action-voronoi',\n          onMouseEnter: function onMouseEnter() {\n            return handleFocus(datumBoundary.datum);\n          },\n          style: {\n            fill: getOptions().dark ? '#ffffff33' : 'rgba(0,0,0,0.2)',\n            strokeWidth: 1,\n            stroke: getOptions().dark ? 'white' : 'black',\n            opacity: getOptions().showVoronoi ? 1 : 0\n          }\n        });\n      }));\n    }));\n  }, [datumsByInteractionGroup, primaryAxis, gridDimensions.left, gridDimensions.top, secondaryAxes, useBarPx, stackedVoronoi, handleFocus, getOptions]);\n}\n\nvar delaunayLineFn = line();\n\nfunction SingleVoronoi(_ref3) {\n  var handleFocus = _ref3.handleFocus;\n\n  var _useChartContext3 = useChartContext(),\n      primaryAxis = _useChartContext3.primaryAxis,\n      series = _useChartContext3.series,\n      secondaryAxes = _useChartContext3.secondaryAxes,\n      getOptions = _useChartContext3.getOptions,\n      gridDimensions = _useChartContext3.gridDimensions;\n\n  var polygons = null;\n  var voronoiData = [];\n  var useBarPx = secondaryAxes.every(function (d) {\n    return d.elementType === 'bar' && !d.stacked;\n  });\n  series.forEach(function (serie) {\n    serie.datums.filter(function (datum) {\n      var primaryValue = datum.primaryValue;\n      var secondaryValue = datum.secondaryValue;\n      return primaryValue !== 'undefined' && primaryValue !== null && secondaryValue !== 'undefined' && secondaryValue !== null;\n    }).forEach(function (datum) {\n      var secondaryAxis = secondaryAxes.find(function (d) {\n        return d.id === datum.secondaryAxisId;\n      });\n      var x = getX(datum, primaryAxis, secondaryAxis, useBarPx);\n      var y = getY(datum, primaryAxis, secondaryAxis, useBarPx);\n\n      if (typeof x !== 'number' || typeof y !== 'number' || Number.isNaN(y) || Number.isNaN(x)) {\n        return;\n      }\n\n      voronoiData.push({\n        x: x,\n        y: y,\n        datum: datum\n      });\n    });\n  });\n  var delaunay = Delaunay.from(voronoiData, function (d) {\n    return Math.max(d.x, 0);\n  }, function (d) {\n    return Math.max(d.y, 0);\n  });\n  var voronoi = delaunay.voronoi([0, 0, gridDimensions.width, gridDimensions.height]);\n  polygons = voronoi.cellPolygons();\n  polygons = Array.from(polygons);\n  return /*#__PURE__*/React.createElement(\"g\", {\n    onMouseLeave: function onMouseLeave() {\n      return handleFocus(null);\n    },\n    style: {\n      transform: translate(gridDimensions.left, gridDimensions.top)\n    }\n  }, polygons.map(function (points, i) {\n    var index = points.index;\n    var datum = voronoiData[index].datum;\n    var path = delaunayLineFn(points) || undefined;\n    return /*#__PURE__*/React.createElement(\"path\", {\n      key: i,\n      d: path,\n      className: 'action-voronoi',\n      onMouseEnter: function onMouseEnter() {\n        return handleFocus(datum);\n      },\n      style: {\n        fill: getOptions().dark ? '#ffffff33' : 'rgba(0,0,0,0.2)',\n        strokeWidth: 1,\n        stroke: getOptions().dark ? 'white' : 'black',\n        opacity: getOptions().showVoronoi ? 1 : 0\n      }\n    });\n  }));\n}\n\nfunction getX(datum, primaryAxis, secondaryAxis, useBarPx) {\n  return primaryAxis.isVertical ? getSecondary(datum, secondaryAxis) : getPrimary(datum, primaryAxis, secondaryAxis, useBarPx);\n}\n\nfunction getY(datum, primaryAxis, secondaryAxis, useBarPx) {\n  return primaryAxis.isVertical ? getPrimary(datum, primaryAxis, secondaryAxis, useBarPx) : getSecondary(datum, secondaryAxis);\n}\n\nfunction getPrimary(datum, primaryAxis, secondaryAxis, useBarPx) {\n  var _primaryAxis$scale;\n\n  var primary = (_primaryAxis$scale = primaryAxis.scale(datum.primaryValue)) != null ? _primaryAxis$scale : NaN;\n\n  if (useBarPx && secondaryAxis.elementType === 'bar') {\n    if (!secondaryAxis.stacked) {\n      var _ref4;\n\n      primary += (_ref4 = primaryAxis.seriesBandScale(datum.seriesIndex)) != null ? _ref4 : NaN;\n      primary += getPrimaryLength(datum, primaryAxis, secondaryAxis) / 2;\n    } else {\n      primary += getPrimaryGroupLength(datum, primaryAxis) / 2;\n    }\n  }\n\n  return primary;\n}\n\nfunction getSecondary(datum, secondaryAxis) {\n  var _secondaryAxis$scale5;\n\n  if (secondaryAxis.stacked) {\n    var _secondaryAxis$scale4, _datum$stackData$, _datum$stackData4;\n\n    return (_secondaryAxis$scale4 = secondaryAxis.scale((_datum$stackData$ = (_datum$stackData4 = datum.stackData) == null ? void 0 : _datum$stackData4[1]) != null ? _datum$stackData$ : NaN)) != null ? _secondaryAxis$scale4 : NaN;\n  }\n\n  return (_secondaryAxis$scale5 = secondaryAxis.scale(datum.secondaryValue)) != null ? _secondaryAxis$scale5 : NaN;\n}","map":{"version":3,"names":["React","Delaunay","translate","useChartContext","line","getPrimaryGroupLength","getPrimaryLength","Voronoi","_useChartContext","getOptions","focusedDatumState","isInteractingState","setFocusedDatum","isInteracting","_getOptions","onFocusDatum","onClickDatum","tooltip","primaryCursor","secondaryCursor","showVoronoi","interactionMode","handleFocus","useCallback","datum","_getOptions$onFocusDa","_getOptions2","call","needsVoronoi","props","createElement","SingleVoronoi","PrimaryVoronoi","_ref","_useChartContext2","primaryAxis","secondaryAxes","gridDimensions","datumsByInteractionGroup","stackedVoronoi","length","stacked","useBarPx","every","d","elementType","useMemo","preColumns","Array","from","entries","map","_ref2","_","datums","filter","primaryValue","sort","a","b","aAxis","find","id","secondaryAxisId","bAxis","aPx","getPrimary","bPx","isVertical","reverse","columns","i","all","_primaryAxis$scale$ra","prev","next","secondaryAxis","primaryPx","range","scale","primaryStart","primaryEnd","_secondaryAxis","prevPx","_secondaryAxis2","nextPx","datumBoundaries","secondaryValue","_secondaryAxis$scale3","_datum$stackData3","_secondaryAxis$scale$2","_secondaryAxis$scale$","_datum$stackData","_datum$stackData2","_range","stackData","_secondaryStart","_secondaryEnd","_secondaryAxis$scale","_stackData$","NaN","_secondaryAxis$scale2","_stackData$2","secondaryStart","secondaryEnd","value","_prevAxis$scale","_prev$stackData","prevAxis","prevValue","_nextAxis$scale","_next$stackData","nextAxis","nextValue","onMouseLeave","style","transform","left","top","column","key","datumBoundary","x1","x2","y1","y2","x","Math","min","y","xEnd","max","yEnd","height","width","className","onMouseEnter","fill","dark","strokeWidth","stroke","opacity","delaunayLineFn","_ref3","_useChartContext3","series","polygons","voronoiData","forEach","serie","getX","getY","Number","isNaN","push","delaunay","voronoi","cellPolygons","points","index","path","undefined","getSecondary","_primaryAxis$scale","primary","_ref4","seriesBandScale","seriesIndex","_secondaryAxis$scale5","_secondaryAxis$scale4","_datum$stackData$","_datum$stackData4"],"sources":["/Users/ryanmarr/Documents/Quantitative-Analysis-Site-ws/Quantitative_Analysis_Site/frontend/node_modules/react-charts/es/components/Voronoi.js"],"sourcesContent":["import React from 'react';\nimport { Delaunay } from 'd3-delaunay'; //\n\nimport { translate } from '../utils/Utils';\nimport useChartContext from '../utils/chartContext';\nimport { line } from 'd3-shape';\nimport { getPrimaryGroupLength, getPrimaryLength } from '../seriesTypes/Bar';\nexport default function Voronoi() {\n  var _useChartContext = useChartContext(),\n      getOptions = _useChartContext.getOptions,\n      focusedDatumState = _useChartContext.focusedDatumState,\n      isInteractingState = _useChartContext.isInteractingState;\n\n  var setFocusedDatum = focusedDatumState[1];\n  var isInteracting = isInteractingState[0];\n\n  var _getOptions = getOptions(),\n      onFocusDatum = _getOptions.onFocusDatum,\n      onClickDatum = _getOptions.onClickDatum,\n      tooltip = _getOptions.tooltip,\n      primaryCursor = _getOptions.primaryCursor,\n      secondaryCursor = _getOptions.secondaryCursor,\n      showVoronoi = _getOptions.showVoronoi,\n      interactionMode = _getOptions.interactionMode;\n\n  var handleFocus = React.useCallback(function (datum) {\n    var _getOptions$onFocusDa, _getOptions2;\n\n    (_getOptions$onFocusDa = (_getOptions2 = getOptions()).onFocusDatum) == null ? void 0 : _getOptions$onFocusDa.call(_getOptions2, datum);\n    setFocusedDatum(datum);\n  }, [getOptions, setFocusedDatum]);\n  var needsVoronoi = isInteracting && (showVoronoi || onFocusDatum || onClickDatum || tooltip || primaryCursor || secondaryCursor);\n\n  if (!needsVoronoi) {\n    return null;\n  }\n\n  var props = {\n    handleFocus: handleFocus\n  };\n\n  if (interactionMode === 'closest') {\n    return /*#__PURE__*/React.createElement(SingleVoronoi, props);\n  }\n\n  return /*#__PURE__*/React.createElement(PrimaryVoronoi, props);\n}\n\nfunction PrimaryVoronoi(_ref) {\n  var handleFocus = _ref.handleFocus;\n\n  var _useChartContext2 = useChartContext(),\n      primaryAxis = _useChartContext2.primaryAxis,\n      secondaryAxes = _useChartContext2.secondaryAxes,\n      getOptions = _useChartContext2.getOptions,\n      gridDimensions = _useChartContext2.gridDimensions,\n      datumsByInteractionGroup = _useChartContext2.datumsByInteractionGroup;\n\n  var stackedVoronoi = secondaryAxes.length === 1 && secondaryAxes[0].stacked;\n  var useBarPx = secondaryAxes.every(function (d) {\n    return d.elementType === 'bar' && !d.stacked;\n  });\n  return React.useMemo(function () {\n    var preColumns = Array.from(datumsByInteractionGroup.entries()).map(function (_ref2) {\n      var _ = _ref2[0],\n          datums = _ref2[1];\n      return datums;\n    }).filter(function (datums) {\n      var datum = datums[0];\n\n      if (!datum) {\n        return;\n      }\n\n      var primaryValue = datum.primaryValue;\n      return primaryValue !== 'undefined' && primaryValue !== null;\n    }).sort(function (a, b) {\n      var aAxis = secondaryAxes.find(function (d) {\n        return d.id === a[0].secondaryAxisId;\n      });\n      var bAxis = secondaryAxes.find(function (d) {\n        return d.id === b[0].secondaryAxisId;\n      });\n      var aPx = getPrimary(a[0], primaryAxis, aAxis, useBarPx);\n      var bPx = getPrimary(b[0], primaryAxis, bAxis, useBarPx);\n      return aPx - bPx;\n    });\n\n    if (primaryAxis.isVertical) {\n      preColumns.reverse();\n    }\n\n    var columns = preColumns.map(function (datums, i, all) {\n      var _primaryAxis$scale$ra;\n\n      var datum = datums[0];\n      var prev = all[i - 1];\n      var next = all[i + 1];\n      var secondaryAxis = secondaryAxes.find(function (d) {\n        return d.id === datum.secondaryAxisId;\n      });\n      var primaryPx = getPrimary(datum, primaryAxis, secondaryAxis, useBarPx);\n      var range = (_primaryAxis$scale$ra = primaryAxis == null ? void 0 : primaryAxis.scale.range()) != null ? _primaryAxis$scale$ra : [0, 0];\n      var primaryStart = range[0],\n          primaryEnd = range[1];\n\n      if (prev) {\n        var _secondaryAxis = secondaryAxes.find(function (d) {\n          return d.id === prev[0].secondaryAxisId;\n        });\n\n        var prevPx = getPrimary(prev[0], primaryAxis, _secondaryAxis, useBarPx);\n        primaryStart = primaryPx - (primaryPx - prevPx) / 2;\n      }\n\n      if (next) {\n        var _secondaryAxis2 = secondaryAxes.find(function (d) {\n          return d.id === next[0].secondaryAxisId;\n        });\n\n        var nextPx = getPrimary(next[0], primaryAxis, _secondaryAxis2, useBarPx);\n        primaryEnd = primaryPx + (nextPx - primaryPx) / 2;\n      }\n\n      return {\n        primaryStart: primaryStart,\n        primaryEnd: primaryEnd,\n        primaryPx: primaryPx,\n        datumBoundaries: datums.filter(function (datum) {\n          var secondaryValue = datum.secondaryValue;\n          return typeof secondaryValue !== 'undefined' && secondaryValue !== null;\n        }).map(function (datum, i, all) {\n          var _secondaryAxis$scale3, _datum$stackData3, _secondaryAxis$scale$2;\n\n          var prev = all[i - 1];\n          var next = all[i + 1];\n          var secondaryAxis = secondaryAxes.find(function (d) {\n            return d.id === datum.secondaryAxisId;\n          });\n\n          if (stackedVoronoi) {\n            var _secondaryAxis$scale$, _datum$stackData, _datum$stackData2;\n\n            var _range = (_secondaryAxis$scale$ = secondaryAxis == null ? void 0 : secondaryAxis.scale.range()) != null ? _secondaryAxis$scale$ : [0, 0];\n\n            var stackData = [(_datum$stackData = datum.stackData) == null ? void 0 : _datum$stackData[0], (_datum$stackData2 = datum.stackData) == null ? void 0 : _datum$stackData2[1]];\n\n            if (secondaryAxis != null && secondaryAxis.isVertical) {\n              _range.reverse();\n\n              stackData.reverse();\n            }\n\n            var _secondaryStart = _range[0],\n                _secondaryEnd = _range[1];\n\n            if (prev) {\n              var _secondaryAxis$scale, _stackData$;\n\n              _secondaryStart = (_secondaryAxis$scale = secondaryAxis == null ? void 0 : secondaryAxis.scale((_stackData$ = stackData[0]) != null ? _stackData$ : NaN)) != null ? _secondaryAxis$scale : NaN;\n            }\n\n            if (next) {\n              var _secondaryAxis$scale2, _stackData$2;\n\n              _secondaryEnd = (_secondaryAxis$scale2 = secondaryAxis == null ? void 0 : secondaryAxis.scale((_stackData$2 = stackData[1]) != null ? _stackData$2 : NaN)) != null ? _secondaryAxis$scale2 : NaN;\n            }\n\n            return {\n              secondaryStart: _secondaryStart,\n              secondaryEnd: _secondaryEnd,\n              datum: datum\n            };\n          }\n\n          var value = (_secondaryAxis$scale3 = secondaryAxis == null ? void 0 : secondaryAxis.scale(secondaryAxis.stacked ? (_datum$stackData3 = datum.stackData) == null ? void 0 : _datum$stackData3[1] : datum.secondaryValue)) != null ? _secondaryAxis$scale3 : NaN;\n          var range = (_secondaryAxis$scale$2 = secondaryAxis == null ? void 0 : secondaryAxis.scale.range()) != null ? _secondaryAxis$scale$2 : [0, 0];\n\n          if (secondaryAxis != null && secondaryAxis.isVertical) {\n            range.reverse();\n          }\n\n          var secondaryStart = range[0],\n              secondaryEnd = range[1];\n\n          if (prev) {\n            var _prevAxis$scale, _prev$stackData;\n\n            var prevAxis = secondaryAxes.find(function (d) {\n              return d.id === (prev == null ? void 0 : prev.secondaryAxisId);\n            });\n            var prevValue = (_prevAxis$scale = prevAxis == null ? void 0 : prevAxis.scale(prevAxis.stacked ? (_prev$stackData = prev.stackData) == null ? void 0 : _prev$stackData[1] : prev.secondaryValue)) != null ? _prevAxis$scale : NaN;\n            secondaryStart = value - (value - prevValue) / 2;\n          }\n\n          if (next) {\n            var _nextAxis$scale, _next$stackData;\n\n            var nextAxis = secondaryAxes.find(function (d) {\n              return d.id === (next == null ? void 0 : next.secondaryAxisId);\n            });\n            var nextValue = (_nextAxis$scale = nextAxis == null ? void 0 : nextAxis.scale(nextAxis.stacked ? (_next$stackData = next.stackData) == null ? void 0 : _next$stackData[1] : next.secondaryValue)) != null ? _nextAxis$scale : NaN;\n            secondaryEnd = value + (nextValue - value) / 2;\n          }\n\n          return {\n            secondaryStart: secondaryStart,\n            secondaryEnd: secondaryEnd,\n            datum: datum\n          };\n        })\n      };\n    });\n    return /*#__PURE__*/React.createElement(\"g\", {\n      onMouseLeave: function onMouseLeave() {\n        return handleFocus(null);\n      },\n      style: {\n        transform: translate(gridDimensions.left, gridDimensions.top)\n      }\n    }, columns.map(function (column, i) {\n      return /*#__PURE__*/React.createElement(\"g\", {\n        key: column.primaryPx + \"_\" + i\n      }, column.datumBoundaries.map(function (datumBoundary, i) {\n        var x1 = !primaryAxis.isVertical ? column.primaryStart : datumBoundary.secondaryStart;\n        var x2 = !primaryAxis.isVertical ? column.primaryEnd : datumBoundary.secondaryEnd;\n        var y1 = !primaryAxis.isVertical ? datumBoundary.secondaryStart : column.primaryStart;\n        var y2 = !primaryAxis.isVertical ? datumBoundary.secondaryEnd : column.primaryEnd;\n        var x = Math.min(x1, x2);\n        var y = Math.min(y1, y2);\n        var xEnd = Math.max(x1, x2);\n        var yEnd = Math.max(y1, y2);\n        var height = Math.max(yEnd - y, 0);\n        var width = Math.max(xEnd - x, 0);\n        return /*#__PURE__*/React.createElement(\"rect\", {\n          key: i,\n          x: x,\n          y: y,\n          width: width,\n          height: height,\n          className: 'action-voronoi',\n          onMouseEnter: function onMouseEnter() {\n            return handleFocus(datumBoundary.datum);\n          },\n          style: {\n            fill: getOptions().dark ? '#ffffff33' : 'rgba(0,0,0,0.2)',\n            strokeWidth: 1,\n            stroke: getOptions().dark ? 'white' : 'black',\n            opacity: getOptions().showVoronoi ? 1 : 0\n          }\n        });\n      }));\n    }));\n  }, [datumsByInteractionGroup, primaryAxis, gridDimensions.left, gridDimensions.top, secondaryAxes, useBarPx, stackedVoronoi, handleFocus, getOptions]);\n}\n\nvar delaunayLineFn = line();\n\nfunction SingleVoronoi(_ref3) {\n  var handleFocus = _ref3.handleFocus;\n\n  var _useChartContext3 = useChartContext(),\n      primaryAxis = _useChartContext3.primaryAxis,\n      series = _useChartContext3.series,\n      secondaryAxes = _useChartContext3.secondaryAxes,\n      getOptions = _useChartContext3.getOptions,\n      gridDimensions = _useChartContext3.gridDimensions;\n\n  var polygons = null;\n  var voronoiData = [];\n  var useBarPx = secondaryAxes.every(function (d) {\n    return d.elementType === 'bar' && !d.stacked;\n  });\n  series.forEach(function (serie) {\n    serie.datums.filter(function (datum) {\n      var primaryValue = datum.primaryValue;\n      var secondaryValue = datum.secondaryValue;\n      return primaryValue !== 'undefined' && primaryValue !== null && secondaryValue !== 'undefined' && secondaryValue !== null;\n    }).forEach(function (datum) {\n      var secondaryAxis = secondaryAxes.find(function (d) {\n        return d.id === datum.secondaryAxisId;\n      });\n      var x = getX(datum, primaryAxis, secondaryAxis, useBarPx);\n      var y = getY(datum, primaryAxis, secondaryAxis, useBarPx);\n\n      if (typeof x !== 'number' || typeof y !== 'number' || Number.isNaN(y) || Number.isNaN(x)) {\n        return;\n      }\n\n      voronoiData.push({\n        x: x,\n        y: y,\n        datum: datum\n      });\n    });\n  });\n  var delaunay = Delaunay.from(voronoiData, function (d) {\n    return Math.max(d.x, 0);\n  }, function (d) {\n    return Math.max(d.y, 0);\n  });\n  var voronoi = delaunay.voronoi([0, 0, gridDimensions.width, gridDimensions.height]);\n  polygons = voronoi.cellPolygons();\n  polygons = Array.from(polygons);\n  return /*#__PURE__*/React.createElement(\"g\", {\n    onMouseLeave: function onMouseLeave() {\n      return handleFocus(null);\n    },\n    style: {\n      transform: translate(gridDimensions.left, gridDimensions.top)\n    }\n  }, polygons.map(function (points, i) {\n    var index = points.index;\n    var datum = voronoiData[index].datum;\n    var path = delaunayLineFn(points) || undefined;\n    return /*#__PURE__*/React.createElement(\"path\", {\n      key: i,\n      d: path,\n      className: 'action-voronoi',\n      onMouseEnter: function onMouseEnter() {\n        return handleFocus(datum);\n      },\n      style: {\n        fill: getOptions().dark ? '#ffffff33' : 'rgba(0,0,0,0.2)',\n        strokeWidth: 1,\n        stroke: getOptions().dark ? 'white' : 'black',\n        opacity: getOptions().showVoronoi ? 1 : 0\n      }\n    });\n  }));\n}\n\nfunction getX(datum, primaryAxis, secondaryAxis, useBarPx) {\n  return primaryAxis.isVertical ? getSecondary(datum, secondaryAxis) : getPrimary(datum, primaryAxis, secondaryAxis, useBarPx);\n}\n\nfunction getY(datum, primaryAxis, secondaryAxis, useBarPx) {\n  return primaryAxis.isVertical ? getPrimary(datum, primaryAxis, secondaryAxis, useBarPx) : getSecondary(datum, secondaryAxis);\n}\n\nfunction getPrimary(datum, primaryAxis, secondaryAxis, useBarPx) {\n  var _primaryAxis$scale;\n\n  var primary = (_primaryAxis$scale = primaryAxis.scale(datum.primaryValue)) != null ? _primaryAxis$scale : NaN;\n\n  if (useBarPx && secondaryAxis.elementType === 'bar') {\n    if (!secondaryAxis.stacked) {\n      var _ref4;\n\n      primary += (_ref4 = primaryAxis.seriesBandScale(datum.seriesIndex)) != null ? _ref4 : NaN;\n      primary += getPrimaryLength(datum, primaryAxis, secondaryAxis) / 2;\n    } else {\n      primary += getPrimaryGroupLength(datum, primaryAxis) / 2;\n    }\n  }\n\n  return primary;\n}\n\nfunction getSecondary(datum, secondaryAxis) {\n  var _secondaryAxis$scale5;\n\n  if (secondaryAxis.stacked) {\n    var _secondaryAxis$scale4, _datum$stackData$, _datum$stackData4;\n\n    return (_secondaryAxis$scale4 = secondaryAxis.scale((_datum$stackData$ = (_datum$stackData4 = datum.stackData) == null ? void 0 : _datum$stackData4[1]) != null ? _datum$stackData$ : NaN)) != null ? _secondaryAxis$scale4 : NaN;\n  }\n\n  return (_secondaryAxis$scale5 = secondaryAxis.scale(datum.secondaryValue)) != null ? _secondaryAxis$scale5 : NaN;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}