{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ryanmarr/Documents/Quantitative-Analysis-Site-ws/Quantitative_Analysis_Site/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ryanmarr/Documents/Quantitative-Analysis-Site-ws/Quantitative_Analysis_Site/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{React}from'react';import{useNavigate}from\"react-router-dom\";import{useAuth}from'./useAuth';import Button from'react-bootstrap/Button';import Cookies from'js-cookie';import'../matador_components.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MatadorSignIn=function MatadorSignIn(){var navigate=useNavigate();var _useAuth=useAuth(),signinFrontend=_useAuth.signinFrontend;var headers=new Headers({\"X-CSRFToken\":Cookies.get('csrftoken')});var handleSignin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var formData,response,apiResponse;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// Prevent the form from doing the default html garbage\nevent.preventDefault();// Get the form data and send signin req to server.\nformData=new FormData(event.target);_context.next=4;return fetch(\"api/signinUser\",{method:\"POST\",headers:headers,body:formData});case 4:response=_context.sent;_context.next=7;return response.json();case 7:apiResponse=_context.sent;console.log(\"Response:\",apiResponse);// Check if the login succeeded\nif(apiResponse.auth){signinFrontend({username:formData.get(\"username\"),password:formData.get(\"password\")});}// TODO: RYAN CONNECT THIS BACK AGAIN\n// if (apiResponse.kyc_complete) {\n// // Persist the login state to react so the user can access protected routes.\n//   signinFrontend({\n//     username: formData.get(\"username\"),\n//     password: formData.get(\"password\")\n//   });\n// }\n// else {\n//   navigate(\"/kyc\", {replace : true})\n// }\n// } else {\n//   alert(\"Auth Failed\");\n// }\ncase 10:case\"end\":return _context.stop();}}},_callee);}));return function handleSignin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"authform\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Matador\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Sign in to Your Account\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSignin,children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-group inputWrapper\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",id:\"username\",name:\"username\",type:\"text\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group inputWrapper\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"password1\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",id:\"password\",name:\"password\",type:\"password\",required:true})]}),/*#__PURE__*/_jsx(Button,{style:{\"margin-top\":\"10px\"},type:\"submit\",variant:\"outline-dark\",children:\"Sign In\"})]})]});};export default MatadorSignIn;","map":{"version":3,"names":["React","useNavigate","useAuth","Button","Cookies","MatadorSignIn","navigate","signinFrontend","headers","Headers","get","handleSignin","event","preventDefault","formData","FormData","target","fetch","method","body","response","json","apiResponse","console","log","auth","username","password"],"sources":["/Users/ryanmarr/Documents/Quantitative-Analysis-Site-ws/Quantitative_Analysis_Site/frontend/src/new_components/auth/signin.js"],"sourcesContent":["import { React } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from './useAuth';\nimport Button from 'react-bootstrap/Button';\n\nimport Cookies from 'js-cookie';\n\nimport '../matador_components.css';\n\nconst MatadorSignIn = () => {\n\n  let navigate = useNavigate();\n\n  const { signinFrontend } = useAuth();\n  \n  const headers = new Headers({\n    \"X-CSRFToken\": Cookies.get('csrftoken')\n  }); \n\n  const handleSignin = async (event) => {\n    // Prevent the form from doing the default html garbage\n    event.preventDefault();\n    // Get the form data and send signin req to server.\n    const formData = new FormData(event.target);\n    const response = await fetch(\"api/signinUser\",\n      {\n        method: \"POST\",\n        headers: headers,\n        body: formData\n      });\n\n    const apiResponse  = await response.json();\n\n    console.log(\"Response:\", apiResponse)\n    // Check if the login succeeded\n    if (apiResponse.auth) {\n      signinFrontend({\n        username: formData.get(\"username\"),\n        password: formData.get(\"password\")\n      });\n    }\n\n      // TODO: RYAN CONNECT THIS BACK AGAIN\n      // if (apiResponse.kyc_complete) {\n      // // Persist the login state to react so the user can access protected routes.\n      //   signinFrontend({\n      //     username: formData.get(\"username\"),\n      //     password: formData.get(\"password\")\n      //   });\n    // }\n    // else {\n    //   navigate(\"/kyc\", {replace : true})\n    // }\n    // } else {\n    //   alert(\"Auth Failed\");\n    // }\n    \n  };\n\n  return (\n      <div className='authform'>\n      <h1>Matador</h1>\n      <p>Sign in to Your Account</p>\n      <form onSubmit={handleSignin}>\n\n        <div class=\"form-group inputWrapper\">\n          <label for=\"username\">Username</label>\n          <input class=\"form-control\" id=\"username\" name=\"username\" type=\"text\" required />\n        </div>\n\n        <div class=\"form-group inputWrapper\">\n          <label for=\"password1\">Password</label>\n          <input class=\"form-control\" id=\"password\" name=\"password\" type=\"password\" required />\n        </div>\n        <Button style={{\"margin-top\": \"10px\"}} type=\"submit\" variant=\"outline-dark\">\n          Sign In\n        </Button>\n      </form>\n      </div>\n  );\n}\n\nexport default MatadorSignIn;"],"mappings":"kXAAA,OAASA,KAAT,KAAsB,OAAtB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,OAAT,KAAwB,WAAxB,CACA,MAAOC,OAAP,KAAmB,wBAAnB,CAEA,MAAOC,QAAP,KAAoB,WAApB,CAEA,MAAO,2BAAP,C,wFAEA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,EAAM,CAE1B,GAAIC,SAAQ,CAAGL,WAAW,EAA1B,CAEA,aAA2BC,OAAO,EAAlC,CAAQK,cAAR,UAAQA,cAAR,CAEA,GAAMC,QAAO,CAAG,GAAIC,QAAJ,CAAY,CAC1B,cAAeL,OAAO,CAACM,GAAR,CAAY,WAAZ,CADW,CAAZ,CAAhB,CAIA,GAAMC,aAAY,4FAAG,iBAAOC,KAAP,sJACnB;AACAA,KAAK,CAACC,cAAN,GACA;AACMC,QAJa,CAIF,GAAIC,SAAJ,CAAaH,KAAK,CAACI,MAAnB,CAJE,uBAKIC,MAAK,CAAC,gBAAD,CAC1B,CACEC,MAAM,CAAE,MADV,CAEEV,OAAO,CAAEA,OAFX,CAGEW,IAAI,CAAEL,QAHR,CAD0B,CALT,QAKbM,QALa,qCAYQA,SAAQ,CAACC,IAAT,EAZR,QAYbC,WAZa,eAcnBC,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAyBF,WAAzB,EACA;AACA,GAAIA,WAAW,CAACG,IAAhB,CAAsB,CACpBlB,cAAc,CAAC,CACbmB,QAAQ,CAAEZ,QAAQ,CAACJ,GAAT,CAAa,UAAb,CADG,CAEbiB,QAAQ,CAAEb,QAAQ,CAACJ,GAAT,CAAa,UAAb,CAFG,CAAD,CAAd,CAID,CAEC;AACA;AACA;AACA;AACA;AACA;AACA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AApCmB,uDAAH,kBAAZC,aAAY,4CAAlB,CAwCA,mBACI,aAAK,SAAS,CAAC,UAAf,wBACA,+BADA,cAEA,8CAFA,cAGA,cAAM,QAAQ,CAAEA,YAAhB,wBAEE,aAAK,KAAK,CAAC,yBAAX,wBACE,cAAO,GAAG,CAAC,UAAX,sBADF,cAEE,cAAO,KAAK,CAAC,cAAb,CAA4B,EAAE,CAAC,UAA/B,CAA0C,IAAI,CAAC,UAA/C,CAA0D,IAAI,CAAC,MAA/D,CAAsE,QAAQ,KAA9E,EAFF,GAFF,cAOE,aAAK,KAAK,CAAC,yBAAX,wBACE,cAAO,GAAG,CAAC,WAAX,sBADF,cAEE,cAAO,KAAK,CAAC,cAAb,CAA4B,EAAE,CAAC,UAA/B,CAA0C,IAAI,CAAC,UAA/C,CAA0D,IAAI,CAAC,UAA/D,CAA0E,QAAQ,KAAlF,EAFF,GAPF,cAWE,KAAC,MAAD,EAAQ,KAAK,CAAE,CAAC,aAAc,MAAf,CAAf,CAAuC,IAAI,CAAC,QAA5C,CAAqD,OAAO,CAAC,cAA7D,qBAXF,GAHA,GADJ,CAqBD,CAvED,CAyEA,cAAeN,cAAf"},"metadata":{},"sourceType":"module"}