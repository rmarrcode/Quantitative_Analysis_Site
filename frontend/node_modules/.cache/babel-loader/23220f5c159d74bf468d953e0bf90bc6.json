{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { extent, max, median, min, range as d3Range } from 'd3-array';\nimport { stack, stackOffsetNone } from 'd3-shape';\nimport { scaleLinear, scaleLog, scaleTime, scaleUtc, scaleBand } from 'd3-scale';\nimport { timeSecond, timeMinute, timeHour, timeDay, timeMonth, timeYear, utcYear, utcMonth, utcDay, utcHour, utcMinute, utcSecond } from 'd3-time';\nimport { timeFormat, utcFormat } from 'd3-time-format';\n\nfunction defaultAxisOptions(options) {\n  var _options$elementType, _options$minTickPaddi, _options$tickLabelRot, _options$innerBandPad, _options$outerBandPad, _options$innerSeriesB, _options$outerSeriesB, _options$show, _options$stacked, _options$shouldNice;\n\n  return _extends({}, options, {\n    elementType: (_options$elementType = options.elementType) != null ? _options$elementType : 'line',\n    minTickPaddingForRotation: (_options$minTickPaddi = options.minTickPaddingForRotation) != null ? _options$minTickPaddi : 10,\n    tickLabelRotationDeg: (_options$tickLabelRot = options.tickLabelRotationDeg) != null ? _options$tickLabelRot : 60,\n    innerBandPadding: (_options$innerBandPad = options.innerBandPadding) != null ? _options$innerBandPad : 0.5,\n    outerBandPadding: (_options$outerBandPad = options.outerBandPadding) != null ? _options$outerBandPad : 0.2,\n    innerSeriesBandPadding: (_options$innerSeriesB = options.innerSeriesBandPadding) != null ? _options$innerSeriesB : 0.2,\n    outerSeriesBandPadding: (_options$outerSeriesB = options.outerSeriesBandPadding) != null ? _options$outerSeriesB : 0,\n    show: (_options$show = options.show) != null ? _options$show : true,\n    stacked: (_options$stacked = options.stacked) != null ? _options$stacked : false,\n    shouldNice: (_options$shouldNice = options.shouldNice) != null ? _options$shouldNice : true\n  });\n}\n\nexport default function buildAxisLinear(isPrimary, userOptions, series, allDatums, gridDimensions, width, height) {\n  var options = defaultAxisOptions(userOptions);\n\n  if (!options.position) {\n    throw new Error(\"Chart axes must have a valid 'position' property\");\n  }\n\n  var isVertical = ['left', 'right'].indexOf(options.position) > -1; // Now we need to figure out the range\n\n  var range = isVertical ? [gridDimensions.height, 0] : [0, gridDimensions.width];\n  var outerRange = isVertical ? [height, 0] : [0, width]; // Give the scale a home\n\n  return options.scaleType === 'time' || options.scaleType === 'localTime' ? buildTimeAxis(isPrimary, options, series, allDatums, isVertical, range, outerRange) : options.scaleType === 'linear' || options.scaleType === 'log' ? buildLinearAxis(isPrimary, options, series, allDatums, isVertical, range, outerRange) : options.scaleType === 'band' ? buildBandAxis(isPrimary, options, series, isVertical, range, outerRange) : function () {\n    throw new Error('Invalid scale type');\n  }();\n}\n\nfunction buildTimeAxis(isPrimary, options, series, allDatums, isVertical, range, outerRange) {\n  var isLocal = options.scaleType === 'localTime';\n  var scaleFn = isLocal ? scaleTime : scaleUtc;\n  var isInvalid = false;\n  series = isPrimary ? series : series.filter(function (s) {\n    return s.secondaryAxisId === options.id;\n  });\n  allDatums = isPrimary ? allDatums : allDatums.filter(function (d) {\n    return d.secondaryAxisId === options.id;\n  }); // Now set the range\n\n  var scale = scaleFn(range);\n\n  var _extent = extent(allDatums, function (datum) {\n    var value = options.getValue(datum.originalDatum);\n    datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value;\n    return value;\n  }),\n      minValue = _extent[0],\n      maxValue = _extent[1]; // Here, we find the maximum context (in descending order from year\n  // down to millisecond) needed to understand the\n  // dates in this dataset. If the min/max dates span multiples of\n  // any of the time units OR if the max date resides in a different\n  // unit boundary than today's, we use that unit as context.\n\n\n  var autoFormatStr;\n  var units = isLocal ? {\n    year: timeYear,\n    month: timeMonth,\n    day: timeDay,\n    hour: timeHour,\n    minute: timeMinute,\n    second: timeSecond\n  } : {\n    year: utcYear,\n    month: utcMonth,\n    day: utcDay,\n    hour: utcHour,\n    minute: utcMinute,\n    second: utcSecond\n  };\n\n  if (minValue && maxValue) {\n    if (units.year.count(minValue, maxValue) > 0 || units.year.floor(maxValue) < units.year()) {\n      autoFormatStr = '%b %-d, %Y %-I:%M:%S.%L %p';\n    } else if (units.month.count(minValue, maxValue) > 0 || units.month.floor(maxValue) < units.month()) {\n      autoFormatStr = '%b %-d, %-I:%M:%S.%L %p';\n    } else if (units.day.count(minValue, maxValue) > 0 || units.day.floor(maxValue) < units.day()) {\n      autoFormatStr = '%b %-d, %-I:%M:%S.%L %p';\n    } else if (units.hour.count(minValue, maxValue) > 0 || units.hour.floor(maxValue) < units.hour()) {\n      autoFormatStr = '%-I:%M:%S.%L %p';\n    } else if (units.minute.count(minValue, maxValue) > 0 || units.minute.floor(maxValue) < units.minute()) {\n      autoFormatStr = '%-I:%M:%S.%L';\n    } else if (units.second.count(minValue, maxValue) > 0 || units.second.floor(maxValue) < units.second()) {\n      autoFormatStr = '%L';\n    }\n  }\n\n  var resolvedTimeFormat = isLocal ? timeFormat : utcFormat;\n\n  var trimFormat = function trimFormat(str) {\n    return str.trim().replace(/(,$|^,)/, '');\n  };\n\n  var contextFormat = function contextFormat(format, date) {\n    if (units.second(date) < date) {\n      // milliseconds - Do not remove any context\n      return resolvedTimeFormat(format)(date);\n    }\n\n    if (units.minute(date) < date) {\n      // seconds - remove potential milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/\\.%L.*?(\\s|$)/, '')))(date);\n    }\n\n    if (units.hour(date) < date) {\n      // minutes - remove potential seconds and milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/:%S.*?(\\s|$)/, '')))(date);\n    }\n\n    if (units.day(date) < date) {\n      // hours - remove potential minutes and seconds and milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/:%M.*?(\\s|$)/, '')))(date);\n    }\n\n    if (units.month(date) < date) {\n      // days  - remove potential hours, minutes, seconds and milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/%-I.*/, '')))(date);\n    }\n\n    if (units.year(date) < date) {\n      // months - remove potential days, hours, minutes, seconds and milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/%-d.*/, '')))(date);\n    } // years\n\n\n    return resolvedTimeFormat('%Y')(date);\n  };\n\n  var shouldNice = options.shouldNice; // see https://stackoverflow.com/a/2831422\n\n  if (Object.prototype.toString.call(options.min) === '[object Date]') {\n    minValue = min([options.min, minValue]);\n    shouldNice = false;\n  }\n\n  if (Object.prototype.toString.call(options.max) === '[object Date]') {\n    maxValue = max([options.max, maxValue]);\n    shouldNice = false;\n  }\n\n  if (Object.prototype.toString.call(options.hardMin) === '[object Date]') {\n    minValue = options.hardMin;\n    shouldNice = false;\n  }\n\n  if (Object.prototype.toString.call(options.hardMax) === '[object Date]') {\n    maxValue = options.hardMax;\n    shouldNice = false;\n  }\n\n  if (minValue === undefined || maxValue === undefined) {\n    console.info('Invalid scale min/max', {\n      options: options,\n      series: series,\n      range: range,\n      values: allDatums.map(function (d) {\n        return isPrimary ? d.primaryValue : d.secondaryValue;\n      })\n    });\n    isInvalid = true;\n  } // Set the domain\n\n\n  scale.domain([minValue, maxValue]);\n\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse());\n  }\n\n  if (shouldNice) {\n    scale.nice();\n  }\n\n  var outerScale = scale.copy().range(outerRange); // Supplementary band scale\n\n  var primaryBandScale = isPrimary ? buildPrimaryBandScale(options, scale, series, range) : undefined;\n  var seriesBandScale = primaryBandScale ? buildSeriesBandScale(options, primaryBandScale, series) : undefined;\n  var primaryBandWidth = primaryBandScale == null ? void 0 : primaryBandScale.bandwidth();\n\n  if (options.padBandRange && primaryBandWidth) {\n    var bandStart = scale.invert(0);\n    var bandEnd = scale.invert(primaryBandWidth);\n    var diff = bandEnd.valueOf() - bandStart.valueOf();\n    scale.domain([new Date(scale.domain()[0].valueOf() - diff / 2), new Date(scale.domain()[1].valueOf() + diff / 2)]);\n  }\n\n  var formatters = {};\n  var defaultFormat = scale.tickFormat();\n\n  var scaleFormat = function scaleFormat(value) {\n    var _options$formatters$s, _options$formatters;\n\n    return (_options$formatters$s = (_options$formatters = options.formatters) == null ? void 0 : _options$formatters.scale == null ? void 0 : _options$formatters.scale(value, _extends({}, formatters, {\n      scale: undefined\n    }))) != null ? _options$formatters$s : contextFormat(autoFormatStr, value);\n  };\n\n  var tooltipFormat = function tooltipFormat(value) {\n    var _options$formatters$t, _options$formatters2;\n\n    return (_options$formatters$t = (_options$formatters2 = options.formatters) == null ? void 0 : _options$formatters2.tooltip == null ? void 0 : _options$formatters2.tooltip(value, _extends({}, formatters, {\n      tooltip: undefined\n    }))) != null ? _options$formatters$t : scaleFormat(value);\n  };\n\n  var cursorFormat = function cursorFormat(value) {\n    var _options$formatters$c, _options$formatters3;\n\n    return (_options$formatters$c = (_options$formatters3 = options.formatters) == null ? void 0 : _options$formatters3.cursor == null ? void 0 : _options$formatters3.cursor(value, _extends({}, formatters, {\n      cursor: undefined\n    }))) != null ? _options$formatters$c : scaleFormat(value);\n  };\n\n  Object.assign(formatters, {\n    \"default\": defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat\n  });\n  return _extends({}, options, {\n    isInvalid: isInvalid,\n    axisFamily: 'time',\n    isVertical: isVertical,\n    scale: scale,\n    range: range,\n    outerScale: outerScale,\n    primaryBandScale: primaryBandScale,\n    seriesBandScale: seriesBandScale,\n    formatters: formatters\n  });\n}\n\nfunction buildLinearAxis(isPrimary, options, series, allDatums, isVertical, range, outerRange) {\n  var scale = options.scaleType === 'log' ? scaleLog() : scaleLinear();\n  var isInvalid = false;\n  series = isPrimary ? series : series.filter(function (s) {\n    return s.secondaryAxisId === options.id;\n  });\n  allDatums = isPrimary ? allDatums : allDatums.filter(function (d) {\n    return d.secondaryAxisId === options.id;\n  });\n\n  if (options.stacked) {\n    stackSeries(series, options);\n  }\n\n  var _ref = options.stacked ? extent(series.map(function (s) {\n    return s.datums.map(function (datum) {\n      var _datum$stackData;\n\n      var value = options.getValue(datum.originalDatum);\n      datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value;\n      return (_datum$stackData = datum.stackData) != null ? _datum$stackData : [];\n    });\n  }).flat(2)) : extent(allDatums, function (datum) {\n    var value = options.getValue(datum.originalDatum);\n    datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value;\n    return value;\n  }),\n      minValue = _ref[0],\n      maxValue = _ref[1];\n\n  var shouldNice = options.shouldNice;\n\n  if (typeof options.min === 'number') {\n    minValue = min([options.min, minValue]);\n    shouldNice = false;\n  }\n\n  if (typeof options.max === 'number') {\n    maxValue = max([options.max, maxValue]);\n    shouldNice = false;\n  }\n\n  if (typeof options.minDomainLength === 'number' && !(minValue === undefined || maxValue === undefined)) {\n    var mid = median([minValue, maxValue]);\n    var top = mid + options.minDomainLength / 2;\n    var bottom = mid - options.minDomainLength / 2;\n    maxValue = Math.max(top, maxValue);\n    minValue = Math.min(bottom, minValue);\n  }\n\n  if (typeof options.hardMin === 'number') {\n    minValue = options.hardMin;\n    shouldNice = false;\n  }\n\n  if (typeof options.hardMax === 'number') {\n    maxValue = options.hardMax;\n    shouldNice = false;\n  }\n\n  if (minValue === undefined || maxValue === undefined) {\n    var _minValue, _maxValue;\n\n    isInvalid = true;\n    console.info('Invalid scale min/max', {\n      options: options,\n      series: series,\n      range: range,\n      values: allDatums.map(function (d) {\n        return isPrimary ? d.primaryValue : d.secondaryValue;\n      })\n    });\n    minValue = (_minValue = minValue) != null ? _minValue : 0;\n    maxValue = (_maxValue = maxValue) != null ? _maxValue : 0; // throw new Error('Invalid scale min/max'\n  } // Set the domain\n\n\n  scale.domain([minValue, maxValue]);\n\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse());\n  }\n\n  scale.range(range);\n\n  if (shouldNice) {\n    scale.nice();\n  }\n\n  var outerScale = scale.copy().range(outerRange);\n  var primaryBandScale = isPrimary ? buildPrimaryBandScale(options, scale, series, range) : undefined;\n  var seriesBandScale = primaryBandScale ? buildSeriesBandScale(options, primaryBandScale, series) : undefined;\n  var defaultFormat = scale.tickFormat();\n  var formatters = {};\n\n  var scaleFormat = function scaleFormat(value) {\n    var _options$formatters$s2, _options$formatters4;\n\n    return (_options$formatters$s2 = (_options$formatters4 = options.formatters) == null ? void 0 : _options$formatters4.scale == null ? void 0 : _options$formatters4.scale(value, _extends({}, formatters, {\n      scale: undefined\n    }))) != null ? _options$formatters$s2 : defaultFormat(value);\n  };\n\n  var tooltipFormat = function tooltipFormat(value) {\n    var _options$formatters$t2, _options$formatters5;\n\n    return (_options$formatters$t2 = (_options$formatters5 = options.formatters) == null ? void 0 : _options$formatters5.tooltip == null ? void 0 : _options$formatters5.tooltip(value, _extends({}, formatters, {\n      tooltip: undefined\n    }))) != null ? _options$formatters$t2 : scaleFormat(value);\n  };\n\n  var cursorFormat = function cursorFormat(value) {\n    var _options$formatters$c2, _options$formatters6;\n\n    return (_options$formatters$c2 = (_options$formatters6 = options.formatters) == null ? void 0 : _options$formatters6.cursor == null ? void 0 : _options$formatters6.cursor(value, _extends({}, formatters, {\n      cursor: undefined\n    }))) != null ? _options$formatters$c2 : tooltipFormat(value);\n  };\n\n  Object.assign(formatters, {\n    \"default\": defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat\n  });\n  return _extends({}, options, {\n    isInvalid: isInvalid,\n    axisFamily: 'linear',\n    isVertical: isVertical,\n    scale: scale,\n    range: range,\n    outerScale: outerScale,\n    primaryBandScale: primaryBandScale,\n    seriesBandScale: seriesBandScale,\n    formatters: formatters\n  });\n}\n\nfunction buildBandAxis(isPrimary, options, series, isVertical, range, outerRange) {\n  var _options$outerBandPad2, _options$innerBandPad2;\n\n  series = series.filter(function (d) {\n    return d.secondaryAxisId === options.id;\n  });\n  var isInvalid = false;\n  var domain = Array.from(new Set(series.map(function (d) {\n    return d.datums;\n  }).flat().map(function (datum) {\n    var value = options.getValue(datum.originalDatum);\n    datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value;\n    return value;\n  })));\n  var scale = scaleBand(domain, range).round(false).paddingOuter((_options$outerBandPad2 = options.outerBandPadding) != null ? _options$outerBandPad2 : 0).paddingInner((_options$innerBandPad2 = options.innerBandPadding) != null ? _options$innerBandPad2 : 0); // Invert if necessary\n\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse());\n  }\n\n  var outerScale = scale.copy().range(outerRange);\n  var primaryBandScale = scale;\n  var seriesBandScale = buildSeriesBandScale(options, primaryBandScale, series);\n\n  var defaultFormat = function defaultFormat(d) {\n    return d;\n  };\n\n  var formatters = {};\n\n  var scaleFormat = function scaleFormat(value) {\n    var _options$formatters$s3, _options$formatters7;\n\n    return (_options$formatters$s3 = (_options$formatters7 = options.formatters) == null ? void 0 : _options$formatters7.scale == null ? void 0 : _options$formatters7.scale(value, _extends({}, formatters, {\n      scale: undefined\n    }))) != null ? _options$formatters$s3 : defaultFormat(value);\n  };\n\n  var tooltipFormat = function tooltipFormat(value) {\n    var _options$formatters$t3, _options$formatters8;\n\n    return (_options$formatters$t3 = (_options$formatters8 = options.formatters) == null ? void 0 : _options$formatters8.tooltip == null ? void 0 : _options$formatters8.tooltip(value, _extends({}, formatters, {\n      tooltip: undefined\n    }))) != null ? _options$formatters$t3 : scaleFormat(value);\n  };\n\n  var cursorFormat = function cursorFormat(value) {\n    var _options$formatters$c3, _options$formatters9;\n\n    return (_options$formatters$c3 = (_options$formatters9 = options.formatters) == null ? void 0 : _options$formatters9.cursor == null ? void 0 : _options$formatters9.cursor(value, _extends({}, formatters, {\n      cursor: undefined\n    }))) != null ? _options$formatters$c3 : tooltipFormat(value);\n  };\n\n  Object.assign(formatters, {\n    \"default\": defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat\n  });\n  return _extends({}, options, {\n    isInvalid: isInvalid,\n    axisFamily: 'band',\n    isVertical: isVertical,\n    scale: scale,\n    range: range,\n    outerScale: outerScale,\n    formatters: formatters,\n    primaryBandScale: primaryBandScale,\n    seriesBandScale: seriesBandScale\n  });\n} //\n\n\nfunction stackSeries(series, axisOptions) {\n  var _axisOptions$stackOff;\n\n  var seriesIndices = Object.keys(series);\n  var stacker = stack().keys(seriesIndices).value(function (_, seriesIndex, index) {\n    var _series$Number, _series$Number$datums;\n\n    var originalDatum = (_series$Number = series[Number(seriesIndex)]) == null ? void 0 : (_series$Number$datums = _series$Number.datums[index]) == null ? void 0 : _series$Number$datums.originalDatum;\n    var val = typeof originalDatum !== 'undefined' ? axisOptions.getValue(originalDatum) : 0;\n\n    if (typeof val === 'undefined' || val === null) {\n      return 0;\n    }\n\n    return val;\n  }).offset((_axisOptions$stackOff = axisOptions.stackOffset) != null ? _axisOptions$stackOff : stackOffsetNone);\n  var stacked = stacker(Array.from({\n    length: series.sort(function (a, b) {\n      return b.datums.length - a.datums.length;\n    })[0].datums.length\n  }));\n\n  for (var sIndex = 0; sIndex < stacked.length; sIndex++) {\n    var s = stacked[sIndex];\n\n    for (var i = 0; i < s.length; i++) {\n      var datum = s[i];\n\n      if (series[sIndex].datums[i]) {\n        // @ts-ignore\n        datum.data = series[sIndex].datums[i];\n        series[sIndex].datums[i].stackData = datum;\n      }\n    }\n  }\n}\n\nfunction buildPrimaryBandScale(options, scale, series, range) {\n  var _options$outerBandPad3, _options$innerBandPad3; // Find the two closest points along axis\n\n\n  var impliedBandWidth = Math.max.apply(Math, range);\n\n  for (var i = 0; i < series.length; i++) {\n    var serie = series[i];\n\n    for (var j = 0; j < serie.datums.length; j++) {\n      var _d1$primaryValue;\n\n      var d1 = serie.datums[j];\n      var one = scale((_d1$primaryValue = d1.primaryValue) != null ? _d1$primaryValue : NaN);\n\n      for (var k = 0; k < serie.datums.length; k++) {\n        var _d2$primaryValue;\n\n        var d2 = serie.datums[k];\n        var two = scale((_d2$primaryValue = d2.primaryValue) != null ? _d2$primaryValue : NaN);\n\n        if (one === two) {\n          continue;\n        }\n\n        var diff = Math.abs(Math.max(one, two) - Math.min(one, two));\n\n        if (diff < impliedBandWidth) {\n          impliedBandWidth = diff;\n        }\n      }\n    }\n  }\n\n  var bandRange = Math.max.apply(Math, range);\n  var bandDomain = d3Range(bandRange / impliedBandWidth);\n  var primaryBandScale = scaleBand(bandDomain, range).round(false).paddingOuter((_options$outerBandPad3 = options.outerBandPadding) != null ? _options$outerBandPad3 : 0).paddingInner((_options$innerBandPad3 = options.innerBandPadding) != null ? _options$innerBandPad3 : 0);\n  return primaryBandScale;\n}\n\nfunction buildSeriesBandScale(options, primaryBandScale, series) {\n  var _options$outerSeriesB2, _options$innerSeriesB2;\n\n  var bandDomain = d3Range(series.length);\n  var seriesBandScale = scaleBand(bandDomain, [0, primaryBandScale.bandwidth()]).round(false).paddingOuter((_options$outerSeriesB2 = options.outerSeriesBandPadding) != null ? _options$outerSeriesB2 : options.outerBandPadding ? options.outerBandPadding / 2 : 0).paddingInner((_options$innerSeriesB2 = options.innerSeriesBandPadding) != null ? _options$innerSeriesB2 : options.innerBandPadding ? options.innerBandPadding / 2 : 0);\n\n  var scale = function scale(seriesIndex) {\n    var _series$find;\n\n    return seriesBandScale((_series$find = series.find(function (d) {\n      return d.index === seriesIndex;\n    })) == null ? void 0 : _series$find.indexPerAxis);\n  };\n\n  return Object.assign(scale, seriesBandScale);\n}","map":{"version":3,"names":["_extends","extent","max","median","min","range","d3Range","stack","stackOffsetNone","scaleLinear","scaleLog","scaleTime","scaleUtc","scaleBand","timeSecond","timeMinute","timeHour","timeDay","timeMonth","timeYear","utcYear","utcMonth","utcDay","utcHour","utcMinute","utcSecond","timeFormat","utcFormat","defaultAxisOptions","options","_options$elementType","_options$minTickPaddi","_options$tickLabelRot","_options$innerBandPad","_options$outerBandPad","_options$innerSeriesB","_options$outerSeriesB","_options$show","_options$stacked","_options$shouldNice","elementType","minTickPaddingForRotation","tickLabelRotationDeg","innerBandPadding","outerBandPadding","innerSeriesBandPadding","outerSeriesBandPadding","show","stacked","shouldNice","buildAxisLinear","isPrimary","userOptions","series","allDatums","gridDimensions","width","height","position","Error","isVertical","indexOf","outerRange","scaleType","buildTimeAxis","buildLinearAxis","buildBandAxis","isLocal","scaleFn","isInvalid","filter","s","secondaryAxisId","id","d","scale","_extent","datum","value","getValue","originalDatum","minValue","maxValue","autoFormatStr","units","year","month","day","hour","minute","second","count","floor","resolvedTimeFormat","trimFormat","str","trim","replace","contextFormat","format","date","Object","prototype","toString","call","hardMin","hardMax","undefined","console","info","values","map","primaryValue","secondaryValue","domain","invert","Array","from","reverse","nice","outerScale","copy","primaryBandScale","buildPrimaryBandScale","seriesBandScale","buildSeriesBandScale","primaryBandWidth","bandwidth","padBandRange","bandStart","bandEnd","diff","valueOf","Date","formatters","defaultFormat","tickFormat","scaleFormat","_options$formatters$s","_options$formatters","tooltipFormat","_options$formatters$t","_options$formatters2","tooltip","cursorFormat","_options$formatters$c","_options$formatters3","cursor","assign","axisFamily","stackSeries","_ref","datums","_datum$stackData","stackData","flat","minDomainLength","mid","top","bottom","Math","_minValue","_maxValue","_options$formatters$s2","_options$formatters4","_options$formatters$t2","_options$formatters5","_options$formatters$c2","_options$formatters6","_options$outerBandPad2","_options$innerBandPad2","Set","round","paddingOuter","paddingInner","_options$formatters$s3","_options$formatters7","_options$formatters$t3","_options$formatters8","_options$formatters$c3","_options$formatters9","axisOptions","_axisOptions$stackOff","seriesIndices","keys","stacker","_","seriesIndex","index","_series$Number","_series$Number$datums","Number","val","offset","stackOffset","length","sort","a","b","sIndex","i","data","_options$outerBandPad3","_options$innerBandPad3","impliedBandWidth","apply","serie","j","_d1$primaryValue","d1","one","NaN","k","_d2$primaryValue","d2","two","abs","bandRange","bandDomain","_options$outerSeriesB2","_options$innerSeriesB2","_series$find","find","indexPerAxis"],"sources":["/Users/ryanmarr/Documents/Quantitative-Analysis-Site-ws/Quantitative_Analysis_Site/frontend/node_modules/react-charts/es/utils/buildAxis.linear.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { extent, max, median, min, range as d3Range } from 'd3-array';\nimport { stack, stackOffsetNone } from 'd3-shape';\nimport { scaleLinear, scaleLog, scaleTime, scaleUtc, scaleBand } from 'd3-scale';\nimport { timeSecond, timeMinute, timeHour, timeDay, timeMonth, timeYear, utcYear, utcMonth, utcDay, utcHour, utcMinute, utcSecond } from 'd3-time';\nimport { timeFormat, utcFormat } from 'd3-time-format';\n\nfunction defaultAxisOptions(options) {\n  var _options$elementType, _options$minTickPaddi, _options$tickLabelRot, _options$innerBandPad, _options$outerBandPad, _options$innerSeriesB, _options$outerSeriesB, _options$show, _options$stacked, _options$shouldNice;\n\n  return _extends({}, options, {\n    elementType: (_options$elementType = options.elementType) != null ? _options$elementType : 'line',\n    minTickPaddingForRotation: (_options$minTickPaddi = options.minTickPaddingForRotation) != null ? _options$minTickPaddi : 10,\n    tickLabelRotationDeg: (_options$tickLabelRot = options.tickLabelRotationDeg) != null ? _options$tickLabelRot : 60,\n    innerBandPadding: (_options$innerBandPad = options.innerBandPadding) != null ? _options$innerBandPad : 0.5,\n    outerBandPadding: (_options$outerBandPad = options.outerBandPadding) != null ? _options$outerBandPad : 0.2,\n    innerSeriesBandPadding: (_options$innerSeriesB = options.innerSeriesBandPadding) != null ? _options$innerSeriesB : 0.2,\n    outerSeriesBandPadding: (_options$outerSeriesB = options.outerSeriesBandPadding) != null ? _options$outerSeriesB : 0,\n    show: (_options$show = options.show) != null ? _options$show : true,\n    stacked: (_options$stacked = options.stacked) != null ? _options$stacked : false,\n    shouldNice: (_options$shouldNice = options.shouldNice) != null ? _options$shouldNice : true\n  });\n}\n\nexport default function buildAxisLinear(isPrimary, userOptions, series, allDatums, gridDimensions, width, height) {\n  var options = defaultAxisOptions(userOptions);\n\n  if (!options.position) {\n    throw new Error(\"Chart axes must have a valid 'position' property\");\n  }\n\n  var isVertical = ['left', 'right'].indexOf(options.position) > -1; // Now we need to figure out the range\n\n  var range = isVertical ? [gridDimensions.height, 0] : [0, gridDimensions.width];\n  var outerRange = isVertical ? [height, 0] : [0, width]; // Give the scale a home\n\n  return options.scaleType === 'time' || options.scaleType === 'localTime' ? buildTimeAxis(isPrimary, options, series, allDatums, isVertical, range, outerRange) : options.scaleType === 'linear' || options.scaleType === 'log' ? buildLinearAxis(isPrimary, options, series, allDatums, isVertical, range, outerRange) : options.scaleType === 'band' ? buildBandAxis(isPrimary, options, series, isVertical, range, outerRange) : function () {\n    throw new Error('Invalid scale type');\n  }();\n}\n\nfunction buildTimeAxis(isPrimary, options, series, allDatums, isVertical, range, outerRange) {\n  var isLocal = options.scaleType === 'localTime';\n  var scaleFn = isLocal ? scaleTime : scaleUtc;\n  var isInvalid = false;\n  series = isPrimary ? series : series.filter(function (s) {\n    return s.secondaryAxisId === options.id;\n  });\n  allDatums = isPrimary ? allDatums : allDatums.filter(function (d) {\n    return d.secondaryAxisId === options.id;\n  }); // Now set the range\n\n  var scale = scaleFn(range);\n\n  var _extent = extent(allDatums, function (datum) {\n    var value = options.getValue(datum.originalDatum);\n    datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value;\n    return value;\n  }),\n      minValue = _extent[0],\n      maxValue = _extent[1]; // Here, we find the maximum context (in descending order from year\n  // down to millisecond) needed to understand the\n  // dates in this dataset. If the min/max dates span multiples of\n  // any of the time units OR if the max date resides in a different\n  // unit boundary than today's, we use that unit as context.\n\n\n  var autoFormatStr;\n  var units = isLocal ? {\n    year: timeYear,\n    month: timeMonth,\n    day: timeDay,\n    hour: timeHour,\n    minute: timeMinute,\n    second: timeSecond\n  } : {\n    year: utcYear,\n    month: utcMonth,\n    day: utcDay,\n    hour: utcHour,\n    minute: utcMinute,\n    second: utcSecond\n  };\n\n  if (minValue && maxValue) {\n    if (units.year.count(minValue, maxValue) > 0 || units.year.floor(maxValue) < units.year()) {\n      autoFormatStr = '%b %-d, %Y %-I:%M:%S.%L %p';\n    } else if (units.month.count(minValue, maxValue) > 0 || units.month.floor(maxValue) < units.month()) {\n      autoFormatStr = '%b %-d, %-I:%M:%S.%L %p';\n    } else if (units.day.count(minValue, maxValue) > 0 || units.day.floor(maxValue) < units.day()) {\n      autoFormatStr = '%b %-d, %-I:%M:%S.%L %p';\n    } else if (units.hour.count(minValue, maxValue) > 0 || units.hour.floor(maxValue) < units.hour()) {\n      autoFormatStr = '%-I:%M:%S.%L %p';\n    } else if (units.minute.count(minValue, maxValue) > 0 || units.minute.floor(maxValue) < units.minute()) {\n      autoFormatStr = '%-I:%M:%S.%L';\n    } else if (units.second.count(minValue, maxValue) > 0 || units.second.floor(maxValue) < units.second()) {\n      autoFormatStr = '%L';\n    }\n  }\n\n  var resolvedTimeFormat = isLocal ? timeFormat : utcFormat;\n\n  var trimFormat = function trimFormat(str) {\n    return str.trim().replace(/(,$|^,)/, '');\n  };\n\n  var contextFormat = function contextFormat(format, date) {\n    if (units.second(date) < date) {\n      // milliseconds - Do not remove any context\n      return resolvedTimeFormat(format)(date);\n    }\n\n    if (units.minute(date) < date) {\n      // seconds - remove potential milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/\\.%L.*?(\\s|$)/, '')))(date);\n    }\n\n    if (units.hour(date) < date) {\n      // minutes - remove potential seconds and milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/:%S.*?(\\s|$)/, '')))(date);\n    }\n\n    if (units.day(date) < date) {\n      // hours - remove potential minutes and seconds and milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/:%M.*?(\\s|$)/, '')))(date);\n    }\n\n    if (units.month(date) < date) {\n      // days  - remove potential hours, minutes, seconds and milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/%-I.*/, '')))(date);\n    }\n\n    if (units.year(date) < date) {\n      // months - remove potential days, hours, minutes, seconds and milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/%-d.*/, '')))(date);\n    } // years\n\n\n    return resolvedTimeFormat('%Y')(date);\n  };\n\n  var shouldNice = options.shouldNice; // see https://stackoverflow.com/a/2831422\n\n  if (Object.prototype.toString.call(options.min) === '[object Date]') {\n    minValue = min([options.min, minValue]);\n    shouldNice = false;\n  }\n\n  if (Object.prototype.toString.call(options.max) === '[object Date]') {\n    maxValue = max([options.max, maxValue]);\n    shouldNice = false;\n  }\n\n  if (Object.prototype.toString.call(options.hardMin) === '[object Date]') {\n    minValue = options.hardMin;\n    shouldNice = false;\n  }\n\n  if (Object.prototype.toString.call(options.hardMax) === '[object Date]') {\n    maxValue = options.hardMax;\n    shouldNice = false;\n  }\n\n  if (minValue === undefined || maxValue === undefined) {\n    console.info('Invalid scale min/max', {\n      options: options,\n      series: series,\n      range: range,\n      values: allDatums.map(function (d) {\n        return isPrimary ? d.primaryValue : d.secondaryValue;\n      })\n    });\n    isInvalid = true;\n  } // Set the domain\n\n\n  scale.domain([minValue, maxValue]);\n\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse());\n  }\n\n  if (shouldNice) {\n    scale.nice();\n  }\n\n  var outerScale = scale.copy().range(outerRange); // Supplementary band scale\n\n  var primaryBandScale = isPrimary ? buildPrimaryBandScale(options, scale, series, range) : undefined;\n  var seriesBandScale = primaryBandScale ? buildSeriesBandScale(options, primaryBandScale, series) : undefined;\n  var primaryBandWidth = primaryBandScale == null ? void 0 : primaryBandScale.bandwidth();\n\n  if (options.padBandRange && primaryBandWidth) {\n    var bandStart = scale.invert(0);\n    var bandEnd = scale.invert(primaryBandWidth);\n    var diff = bandEnd.valueOf() - bandStart.valueOf();\n    scale.domain([new Date(scale.domain()[0].valueOf() - diff / 2), new Date(scale.domain()[1].valueOf() + diff / 2)]);\n  }\n\n  var formatters = {};\n  var defaultFormat = scale.tickFormat();\n\n  var scaleFormat = function scaleFormat(value) {\n    var _options$formatters$s, _options$formatters;\n\n    return (_options$formatters$s = (_options$formatters = options.formatters) == null ? void 0 : _options$formatters.scale == null ? void 0 : _options$formatters.scale(value, _extends({}, formatters, {\n      scale: undefined\n    }))) != null ? _options$formatters$s : contextFormat(autoFormatStr, value);\n  };\n\n  var tooltipFormat = function tooltipFormat(value) {\n    var _options$formatters$t, _options$formatters2;\n\n    return (_options$formatters$t = (_options$formatters2 = options.formatters) == null ? void 0 : _options$formatters2.tooltip == null ? void 0 : _options$formatters2.tooltip(value, _extends({}, formatters, {\n      tooltip: undefined\n    }))) != null ? _options$formatters$t : scaleFormat(value);\n  };\n\n  var cursorFormat = function cursorFormat(value) {\n    var _options$formatters$c, _options$formatters3;\n\n    return (_options$formatters$c = (_options$formatters3 = options.formatters) == null ? void 0 : _options$formatters3.cursor == null ? void 0 : _options$formatters3.cursor(value, _extends({}, formatters, {\n      cursor: undefined\n    }))) != null ? _options$formatters$c : scaleFormat(value);\n  };\n\n  Object.assign(formatters, {\n    \"default\": defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat\n  });\n  return _extends({}, options, {\n    isInvalid: isInvalid,\n    axisFamily: 'time',\n    isVertical: isVertical,\n    scale: scale,\n    range: range,\n    outerScale: outerScale,\n    primaryBandScale: primaryBandScale,\n    seriesBandScale: seriesBandScale,\n    formatters: formatters\n  });\n}\n\nfunction buildLinearAxis(isPrimary, options, series, allDatums, isVertical, range, outerRange) {\n  var scale = options.scaleType === 'log' ? scaleLog() : scaleLinear();\n  var isInvalid = false;\n  series = isPrimary ? series : series.filter(function (s) {\n    return s.secondaryAxisId === options.id;\n  });\n  allDatums = isPrimary ? allDatums : allDatums.filter(function (d) {\n    return d.secondaryAxisId === options.id;\n  });\n\n  if (options.stacked) {\n    stackSeries(series, options);\n  }\n\n  var _ref = options.stacked ? extent(series.map(function (s) {\n    return s.datums.map(function (datum) {\n      var _datum$stackData;\n\n      var value = options.getValue(datum.originalDatum);\n      datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value;\n      return (_datum$stackData = datum.stackData) != null ? _datum$stackData : [];\n    });\n  }).flat(2)) : extent(allDatums, function (datum) {\n    var value = options.getValue(datum.originalDatum);\n    datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value;\n    return value;\n  }),\n      minValue = _ref[0],\n      maxValue = _ref[1];\n\n  var shouldNice = options.shouldNice;\n\n  if (typeof options.min === 'number') {\n    minValue = min([options.min, minValue]);\n    shouldNice = false;\n  }\n\n  if (typeof options.max === 'number') {\n    maxValue = max([options.max, maxValue]);\n    shouldNice = false;\n  }\n\n  if (typeof options.minDomainLength === 'number' && !(minValue === undefined || maxValue === undefined)) {\n    var mid = median([minValue, maxValue]);\n    var top = mid + options.minDomainLength / 2;\n    var bottom = mid - options.minDomainLength / 2;\n    maxValue = Math.max(top, maxValue);\n    minValue = Math.min(bottom, minValue);\n  }\n\n  if (typeof options.hardMin === 'number') {\n    minValue = options.hardMin;\n    shouldNice = false;\n  }\n\n  if (typeof options.hardMax === 'number') {\n    maxValue = options.hardMax;\n    shouldNice = false;\n  }\n\n  if (minValue === undefined || maxValue === undefined) {\n    var _minValue, _maxValue;\n\n    isInvalid = true;\n    console.info('Invalid scale min/max', {\n      options: options,\n      series: series,\n      range: range,\n      values: allDatums.map(function (d) {\n        return isPrimary ? d.primaryValue : d.secondaryValue;\n      })\n    });\n    minValue = (_minValue = minValue) != null ? _minValue : 0;\n    maxValue = (_maxValue = maxValue) != null ? _maxValue : 0; // throw new Error('Invalid scale min/max'\n  } // Set the domain\n\n\n  scale.domain([minValue, maxValue]);\n\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse());\n  }\n\n  scale.range(range);\n\n  if (shouldNice) {\n    scale.nice();\n  }\n\n  var outerScale = scale.copy().range(outerRange);\n  var primaryBandScale = isPrimary ? buildPrimaryBandScale(options, scale, series, range) : undefined;\n  var seriesBandScale = primaryBandScale ? buildSeriesBandScale(options, primaryBandScale, series) : undefined;\n  var defaultFormat = scale.tickFormat();\n  var formatters = {};\n\n  var scaleFormat = function scaleFormat(value) {\n    var _options$formatters$s2, _options$formatters4;\n\n    return (_options$formatters$s2 = (_options$formatters4 = options.formatters) == null ? void 0 : _options$formatters4.scale == null ? void 0 : _options$formatters4.scale(value, _extends({}, formatters, {\n      scale: undefined\n    }))) != null ? _options$formatters$s2 : defaultFormat(value);\n  };\n\n  var tooltipFormat = function tooltipFormat(value) {\n    var _options$formatters$t2, _options$formatters5;\n\n    return (_options$formatters$t2 = (_options$formatters5 = options.formatters) == null ? void 0 : _options$formatters5.tooltip == null ? void 0 : _options$formatters5.tooltip(value, _extends({}, formatters, {\n      tooltip: undefined\n    }))) != null ? _options$formatters$t2 : scaleFormat(value);\n  };\n\n  var cursorFormat = function cursorFormat(value) {\n    var _options$formatters$c2, _options$formatters6;\n\n    return (_options$formatters$c2 = (_options$formatters6 = options.formatters) == null ? void 0 : _options$formatters6.cursor == null ? void 0 : _options$formatters6.cursor(value, _extends({}, formatters, {\n      cursor: undefined\n    }))) != null ? _options$formatters$c2 : tooltipFormat(value);\n  };\n\n  Object.assign(formatters, {\n    \"default\": defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat\n  });\n  return _extends({}, options, {\n    isInvalid: isInvalid,\n    axisFamily: 'linear',\n    isVertical: isVertical,\n    scale: scale,\n    range: range,\n    outerScale: outerScale,\n    primaryBandScale: primaryBandScale,\n    seriesBandScale: seriesBandScale,\n    formatters: formatters\n  });\n}\n\nfunction buildBandAxis(isPrimary, options, series, isVertical, range, outerRange) {\n  var _options$outerBandPad2, _options$innerBandPad2;\n\n  series = series.filter(function (d) {\n    return d.secondaryAxisId === options.id;\n  });\n  var isInvalid = false;\n  var domain = Array.from(new Set(series.map(function (d) {\n    return d.datums;\n  }).flat().map(function (datum) {\n    var value = options.getValue(datum.originalDatum);\n    datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value;\n    return value;\n  })));\n  var scale = scaleBand(domain, range).round(false).paddingOuter((_options$outerBandPad2 = options.outerBandPadding) != null ? _options$outerBandPad2 : 0).paddingInner((_options$innerBandPad2 = options.innerBandPadding) != null ? _options$innerBandPad2 : 0); // Invert if necessary\n\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse());\n  }\n\n  var outerScale = scale.copy().range(outerRange);\n  var primaryBandScale = scale;\n  var seriesBandScale = buildSeriesBandScale(options, primaryBandScale, series);\n\n  var defaultFormat = function defaultFormat(d) {\n    return d;\n  };\n\n  var formatters = {};\n\n  var scaleFormat = function scaleFormat(value) {\n    var _options$formatters$s3, _options$formatters7;\n\n    return (_options$formatters$s3 = (_options$formatters7 = options.formatters) == null ? void 0 : _options$formatters7.scale == null ? void 0 : _options$formatters7.scale(value, _extends({}, formatters, {\n      scale: undefined\n    }))) != null ? _options$formatters$s3 : defaultFormat(value);\n  };\n\n  var tooltipFormat = function tooltipFormat(value) {\n    var _options$formatters$t3, _options$formatters8;\n\n    return (_options$formatters$t3 = (_options$formatters8 = options.formatters) == null ? void 0 : _options$formatters8.tooltip == null ? void 0 : _options$formatters8.tooltip(value, _extends({}, formatters, {\n      tooltip: undefined\n    }))) != null ? _options$formatters$t3 : scaleFormat(value);\n  };\n\n  var cursorFormat = function cursorFormat(value) {\n    var _options$formatters$c3, _options$formatters9;\n\n    return (_options$formatters$c3 = (_options$formatters9 = options.formatters) == null ? void 0 : _options$formatters9.cursor == null ? void 0 : _options$formatters9.cursor(value, _extends({}, formatters, {\n      cursor: undefined\n    }))) != null ? _options$formatters$c3 : tooltipFormat(value);\n  };\n\n  Object.assign(formatters, {\n    \"default\": defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat\n  });\n  return _extends({}, options, {\n    isInvalid: isInvalid,\n    axisFamily: 'band',\n    isVertical: isVertical,\n    scale: scale,\n    range: range,\n    outerScale: outerScale,\n    formatters: formatters,\n    primaryBandScale: primaryBandScale,\n    seriesBandScale: seriesBandScale\n  });\n} //\n\n\nfunction stackSeries(series, axisOptions) {\n  var _axisOptions$stackOff;\n\n  var seriesIndices = Object.keys(series);\n  var stacker = stack().keys(seriesIndices).value(function (_, seriesIndex, index) {\n    var _series$Number, _series$Number$datums;\n\n    var originalDatum = (_series$Number = series[Number(seriesIndex)]) == null ? void 0 : (_series$Number$datums = _series$Number.datums[index]) == null ? void 0 : _series$Number$datums.originalDatum;\n    var val = typeof originalDatum !== 'undefined' ? axisOptions.getValue(originalDatum) : 0;\n\n    if (typeof val === 'undefined' || val === null) {\n      return 0;\n    }\n\n    return val;\n  }).offset((_axisOptions$stackOff = axisOptions.stackOffset) != null ? _axisOptions$stackOff : stackOffsetNone);\n  var stacked = stacker(Array.from({\n    length: series.sort(function (a, b) {\n      return b.datums.length - a.datums.length;\n    })[0].datums.length\n  }));\n\n  for (var sIndex = 0; sIndex < stacked.length; sIndex++) {\n    var s = stacked[sIndex];\n\n    for (var i = 0; i < s.length; i++) {\n      var datum = s[i];\n\n      if (series[sIndex].datums[i]) {\n        // @ts-ignore\n        datum.data = series[sIndex].datums[i];\n        series[sIndex].datums[i].stackData = datum;\n      }\n    }\n  }\n}\n\nfunction buildPrimaryBandScale(options, scale, series, range) {\n  var _options$outerBandPad3, _options$innerBandPad3;\n\n  // Find the two closest points along axis\n  var impliedBandWidth = Math.max.apply(Math, range);\n\n  for (var i = 0; i < series.length; i++) {\n    var serie = series[i];\n\n    for (var j = 0; j < serie.datums.length; j++) {\n      var _d1$primaryValue;\n\n      var d1 = serie.datums[j];\n      var one = scale((_d1$primaryValue = d1.primaryValue) != null ? _d1$primaryValue : NaN);\n\n      for (var k = 0; k < serie.datums.length; k++) {\n        var _d2$primaryValue;\n\n        var d2 = serie.datums[k];\n        var two = scale((_d2$primaryValue = d2.primaryValue) != null ? _d2$primaryValue : NaN);\n\n        if (one === two) {\n          continue;\n        }\n\n        var diff = Math.abs(Math.max(one, two) - Math.min(one, two));\n\n        if (diff < impliedBandWidth) {\n          impliedBandWidth = diff;\n        }\n      }\n    }\n  }\n\n  var bandRange = Math.max.apply(Math, range);\n  var bandDomain = d3Range(bandRange / impliedBandWidth);\n  var primaryBandScale = scaleBand(bandDomain, range).round(false).paddingOuter((_options$outerBandPad3 = options.outerBandPadding) != null ? _options$outerBandPad3 : 0).paddingInner((_options$innerBandPad3 = options.innerBandPadding) != null ? _options$innerBandPad3 : 0);\n  return primaryBandScale;\n}\n\nfunction buildSeriesBandScale(options, primaryBandScale, series) {\n  var _options$outerSeriesB2, _options$innerSeriesB2;\n\n  var bandDomain = d3Range(series.length);\n  var seriesBandScale = scaleBand(bandDomain, [0, primaryBandScale.bandwidth()]).round(false).paddingOuter((_options$outerSeriesB2 = options.outerSeriesBandPadding) != null ? _options$outerSeriesB2 : options.outerBandPadding ? options.outerBandPadding / 2 : 0).paddingInner((_options$innerSeriesB2 = options.innerSeriesBandPadding) != null ? _options$innerSeriesB2 : options.innerBandPadding ? options.innerBandPadding / 2 : 0);\n\n  var scale = function scale(seriesIndex) {\n    var _series$find;\n\n    return seriesBandScale((_series$find = series.find(function (d) {\n      return d.index === seriesIndex;\n    })) == null ? void 0 : _series$find.indexPerAxis);\n  };\n\n  return Object.assign(scale, seriesBandScale);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}