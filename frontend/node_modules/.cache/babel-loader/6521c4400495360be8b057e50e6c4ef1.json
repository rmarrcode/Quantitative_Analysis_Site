{"ast":null,"code":"import _createForOfIteratorHelperLoose from \"@babel/runtime/helpers/esm/createForOfIteratorHelperLoose\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"options\", \"className\", \"style\"];\nimport { groups, sort, sum } from 'd3-array';\nimport React from 'react';\nimport useGetLatest from '../hooks/useGetLatest';\nimport useIsomorphicLayoutEffect from '../hooks/useIsomorphicLayoutEffect';\nimport Bar, { getPrimary } from '../seriesTypes/Bar';\nimport Line from '../seriesTypes/Line'; //\n\nimport { materializeStyles, getSeriesStatus, getDatumStatus } from '../utils/Utils';\nimport buildAxisLinear from '../utils/buildAxis.linear';\nimport { ChartContextProvider } from '../utils/chartContext';\nimport AxisLinear from './AxisLinear'; // import Brush from './Brush'\n\nimport Cursors from './Cursors';\nimport Tooltip, { defaultTooltip } from './Tooltip';\nimport Voronoi from './Voronoi'; //\n//\n\nvar defaultColorScheme = ['#0f83ab', '#faa43a', '#fd6868', '#53cfc9', '#a2d925', '#decf3f', '#734fe9', '#cd82ad', '#006d92', '#de7c00', '#f33232', '#3f9a80', '#53c200', '#d7af00', '#4c26c9', '#d44d99'];\nvar defaultPadding = 5;\n\nfunction defaultChartOptions(options) {\n  var _options$initialWidth, _options$initialHeigh, _options$getSeriesOrd, _options$interactionM, _options$showVoronoi, _options$defaultColor, _options$useIntersect, _options$intersection, _options$primaryCurso, _options$secondaryCur, _options$padding;\n\n  return _extends({}, options, {\n    initialWidth: (_options$initialWidth = options.initialWidth) != null ? _options$initialWidth : 300,\n    initialHeight: (_options$initialHeigh = options.initialHeight) != null ? _options$initialHeigh : 200,\n    getSeriesOrder: (_options$getSeriesOrd = options.getSeriesOrder) != null ? _options$getSeriesOrd : function (series) {\n      return series;\n    },\n    interactionMode: (_options$interactionM = options.interactionMode) != null ? _options$interactionM : 'primary',\n    showVoronoi: (_options$showVoronoi = options.showVoronoi) != null ? _options$showVoronoi : false,\n    defaultColors: (_options$defaultColor = options.defaultColors) != null ? _options$defaultColor : defaultColorScheme,\n    useIntersectionObserver: (_options$useIntersect = options.useIntersectionObserver) != null ? _options$useIntersect : false,\n    intersectionObserverRootMargin: (_options$intersection = options.intersectionObserverRootMargin) != null ? _options$intersection : '1000px',\n    primaryCursor: (_options$primaryCurso = options.primaryCursor) != null ? _options$primaryCurso : true,\n    secondaryCursor: (_options$secondaryCur = options.secondaryCursor) != null ? _options$secondaryCur : true,\n    padding: (_options$padding = options.padding) != null ? _options$padding : defaultPadding\n  });\n}\n\nexport function Chart(_ref) {\n  var userOptions = _ref.options,\n      className = _ref.className,\n      _ref$style = _ref.style,\n      style = _ref$style === void 0 ? {} : _ref$style,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var options = defaultChartOptions(userOptions);\n\n  var _React$useState = React.useState(null),\n      chartElement = _React$useState[0],\n      setContainerElement = _React$useState[1];\n\n  var containerEl = chartElement == null ? void 0 : chartElement.parentElement;\n  var nearestScrollableParent = React.useMemo(function () {\n    var run = function run(el) {\n      if (!el) {\n        return null;\n      }\n\n      var grandParent = el.parentElement;\n\n      if (!grandParent) {\n        return null;\n      }\n\n      if (grandParent.scrollHeight > grandParent.clientHeight) {\n        var _window$getComputedSt = window.getComputedStyle(grandParent),\n            overflow = _window$getComputedSt.overflow;\n\n        if (overflow.includes('scroll') || overflow.includes('auto')) {\n          return grandParent;\n        }\n      }\n\n      return run(grandParent);\n    };\n\n    return run(containerEl);\n  }, [containerEl]);\n\n  var _React$useState2 = React.useState({\n    width: options.initialWidth,\n    height: options.initialHeight\n  }),\n      _React$useState2$ = _React$useState2[0],\n      width = _React$useState2$.width,\n      height = _React$useState2$.height,\n      setDims = _React$useState2[1];\n\n  useIsomorphicLayoutEffect(function () {\n    if (containerEl) {\n      var computed = window.getComputedStyle(containerEl);\n\n      if (!['relative', 'absolute', 'fixed'].includes(computed.position)) {\n        containerEl.style.position = 'relative';\n      }\n    }\n  }, [containerEl]);\n  React.useEffect(function () {\n    if (!containerEl) {\n      return;\n    }\n\n    var observer = new ResizeObserver(function () {\n      var rect = containerEl == null ? void 0 : containerEl.getBoundingClientRect();\n      var styles = window.getComputedStyle(containerEl);\n\n      if (rect) {\n        setDims({\n          width: rect.width - parseInt(styles.borderLeftWidth) - parseInt(styles.borderRightWidth),\n          height: rect.height - parseInt(styles.borderTopWidth) - parseInt(styles.borderBottomWidth)\n        });\n      }\n    });\n    observer.observe(containerEl);\n    return function () {\n      observer.unobserve(containerEl);\n    };\n  }, [containerEl]);\n\n  var _React$useState3 = React.useState(true),\n      isIntersecting = _React$useState3[0],\n      setIsIntersecting = _React$useState3[1];\n\n  React.useEffect(function () {\n    if (!containerEl || !options.useIntersectionObserver) return;\n    var observer = new IntersectionObserver(function (entries) {\n      for (var _iterator = _createForOfIteratorHelperLoose(entries), _step; !(_step = _iterator()).done;) {\n        var entry = _step.value;\n\n        if (entry.isIntersecting) {\n          setIsIntersecting(true);\n        } else {\n          setIsIntersecting(false);\n        }\n      }\n    }, {\n      root: nearestScrollableParent,\n      rootMargin: options.intersectionObserverRootMargin\n    });\n    observer.observe(containerEl);\n    return function () {\n      observer.unobserve(containerEl);\n    };\n  }, [containerEl, nearestScrollableParent, options.intersectionObserverRootMargin, options.useIntersectionObserver]);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: setContainerElement\n  }, rest, {\n    className: \"ReactChart \" + (className || ''),\n    style: _extends({\n      fontFamily: 'sans-serif'\n    }, style, {\n      position: 'absolute',\n      width: width,\n      height: height\n    })\n  }), options.useIntersectionObserver && !isIntersecting ? null : /*#__PURE__*/React.createElement(ChartInner, {\n    options: options,\n    width: width,\n    height: height\n  }));\n}\n\nfunction ChartInner(_ref2) {\n  var _options2, _options$renderSVG;\n\n  var options = _ref2.options,\n      width = _ref2.width,\n      height = _ref2.height;\n\n  if (!options.primaryAxis) {\n    throw new Error('A primaryAxis is required');\n  }\n\n  if (!options.secondaryAxes.length) {\n    throw new Error('At least one secondaryAxis is required');\n  }\n\n  var primaryAxisOptions = React.useMemo(function () {\n    var firstValue = getFirstDefinedValue(options.primaryAxis, options.data);\n    var axisOptions = axisOptionsWithScaleType(options.primaryAxis, firstValue);\n    return _extends({\n      position: 'bottom'\n    }, axisOptions);\n  }, [options.data, options.primaryAxis]);\n  var secondaryAxesOptions = React.useMemo(function () {\n    return options.secondaryAxes.map(function (secondaryAxis, i) {\n      var firstValue = getFirstDefinedValue(secondaryAxis, options.data);\n      var axisOptions = axisOptionsWithScaleType(secondaryAxis, firstValue);\n\n      if (!axisOptions.elementType) {\n        if (primaryAxisOptions.scaleType === 'band') {\n          axisOptions.elementType = 'bar';\n        } else if (axisOptions.stacked) {\n          axisOptions.elementType = 'area';\n        }\n      }\n\n      if (typeof axisOptions.stacked === 'undefined' && axisOptions.elementType && ['area'].includes(axisOptions.elementType)) {\n        axisOptions.stacked = true;\n      }\n\n      return _extends({\n        position: !i ? 'left' : 'right'\n      }, axisOptions);\n    });\n  }, [options.data, options.secondaryAxes, primaryAxisOptions]); // Resolve Tooltip Option\n\n  var tooltipOptions = React.useMemo(function () {\n    var _options, _tooltipOptions$group;\n\n    var tooltipOptions = defaultTooltip((_options = options) == null ? void 0 : _options.tooltip);\n    tooltipOptions.groupingMode = (_tooltipOptions$group = tooltipOptions.groupingMode) != null ? _tooltipOptions$group : function () {\n      if (options.interactionMode === 'closest') {\n        return 'single';\n      }\n\n      return 'primary';\n    }();\n    return tooltipOptions;\n  }, [options.interactionMode, (_options2 = options) == null ? void 0 : _options2.tooltip]);\n  options = _extends({}, options, {\n    tooltip: tooltipOptions\n  }); //\n\n  var svgRef = React.useRef(null);\n  var getOptions = useGetLatest(_extends({}, options, {\n    tooltip: tooltipOptions\n  }));\n  var axisDimensionsState = React.useState({\n    left: {},\n    right: {},\n    top: {},\n    bottom: {}\n  });\n  var axisDimensions = axisDimensionsState[0];\n  var isInteractingState = React.useState(false);\n  var isInteracting = isInteractingState[0];\n  var focusedDatumState = React.useState(null);\n  var focusedDatum = focusedDatumState[0]; // useAtom<Datum<TDatum> | null>(focusedDatumAtom)\n\n  var gridDimensions = React.useMemo(function () {\n    var _options$padding$left, _options$padding$righ, _options$padding$bott, _options$padding$top;\n\n    var padding = {\n      left: typeof options.padding === 'object' ? (_options$padding$left = options.padding.left) != null ? _options$padding$left : defaultPadding : options.padding,\n      right: typeof options.padding === 'object' ? (_options$padding$righ = options.padding.right) != null ? _options$padding$righ : defaultPadding : options.padding,\n      bottom: typeof options.padding === 'object' ? (_options$padding$bott = options.padding.bottom) != null ? _options$padding$bott : defaultPadding : options.padding,\n      top: typeof options.padding === 'object' ? (_options$padding$top = options.padding.top) != null ? _options$padding$top : defaultPadding : options.padding\n    };\n    var left = padding.left + Math.max(sum(Object.values(axisDimensions.left), function (d) {\n      return d.width;\n    }), sum(Object.values(axisDimensions.top), function (d) {\n      return d.paddingLeft;\n    }), sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.paddingLeft;\n    }));\n    var top = padding.top + Math.max(sum(Object.values(axisDimensions.top), function (d) {\n      return d.height;\n    }), sum(Object.values(axisDimensions.left), function (d) {\n      return d.paddingTop;\n    }), sum(Object.values(axisDimensions.right), function (d) {\n      return d.paddingTop;\n    }));\n    var right = padding.right + Math.max(sum(Object.values(axisDimensions.right), function (d) {\n      return d.width;\n    }), sum(Object.values(axisDimensions.top), function (d) {\n      return d.paddingRight;\n    }), sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.paddingRight;\n    }));\n    var bottom = padding.bottom + Math.max(sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.height;\n    }), sum(Object.values(axisDimensions.left), function (d) {\n      return d.paddingBottom;\n    }), sum(Object.values(axisDimensions.right), function (d) {\n      return d.paddingBottom;\n    }));\n    var gridWidth = Math.max(0, width - left - right);\n    var gridHeight = Math.max(0, height - top - bottom);\n    return {\n      left: left,\n      top: top,\n      right: right,\n      bottom: bottom,\n      width: gridWidth,\n      height: gridHeight\n    };\n  }, [options.padding, axisDimensions.left, axisDimensions.top, axisDimensions.bottom, axisDimensions.right, width, height]);\n  var series = React.useMemo(function () {\n    var series = [];\n    var indicesByAxisId = {};\n\n    for (var seriesIndex = 0; seriesIndex < options.data.length; seriesIndex++) {\n      var _originalSeries$id, _originalSeries$label, _indicesByAxisId$;\n\n      var originalSeries = options.data[seriesIndex];\n      var seriesId = (_originalSeries$id = originalSeries.id) != null ? _originalSeries$id : seriesIndex + '';\n      var seriesLabel = (_originalSeries$label = originalSeries.label) != null ? _originalSeries$label : \"Series \" + (seriesIndex + 1);\n      var secondaryAxisId = originalSeries.secondaryAxisId;\n      var originalDatums = originalSeries.data;\n      var datums = [];\n      indicesByAxisId[\"\" + secondaryAxisId] = (_indicesByAxisId$ = indicesByAxisId[\"\" + secondaryAxisId]) != null ? _indicesByAxisId$ : 0;\n      var seriesIndexPerAxis = indicesByAxisId[\"\" + secondaryAxisId];\n      indicesByAxisId[\"\" + secondaryAxisId]++;\n\n      for (var datumIndex = 0; datumIndex < originalDatums.length; datumIndex++) {\n        var originalDatum = originalDatums[datumIndex];\n        datums[datumIndex] = {\n          originalSeries: originalSeries,\n          seriesIndex: seriesIndex,\n          seriesIndexPerAxis: seriesIndexPerAxis,\n          seriesId: seriesId,\n          seriesLabel: seriesLabel,\n          secondaryAxisId: secondaryAxisId,\n          index: datumIndex,\n          originalDatum: originalDatum\n        };\n      }\n\n      series[seriesIndex] = {\n        originalSeries: originalSeries,\n        index: seriesIndex,\n        id: seriesId,\n        label: seriesLabel,\n        indexPerAxis: seriesIndexPerAxis,\n        secondaryAxisId: secondaryAxisId,\n        datums: datums\n      };\n    }\n\n    return series;\n  }, [options.data]);\n  var allDatums = React.useMemo(function () {\n    return series.map(function (s) {\n      return s.datums;\n    }).flat(2);\n  }, [series]);\n  var primaryAxis = React.useMemo(function () {\n    return buildAxisLinear(true, primaryAxisOptions, series, allDatums, gridDimensions, width, height);\n  }, [allDatums, gridDimensions, height, primaryAxisOptions, series, width]);\n  var secondaryAxes = React.useMemo(function () {\n    return secondaryAxesOptions.map(function (secondaryAxis) {\n      return buildAxisLinear(false, secondaryAxis, series, allDatums, gridDimensions, width, height);\n    });\n  }, [allDatums, gridDimensions, height, secondaryAxesOptions, series, width]);\n\n  var _React$useMemo = React.useMemo(function () {\n    if (!isInteracting) {\n      return [new Map(), new Map()];\n    }\n\n    var datumsByInteractionGroup = new Map();\n    var datumsByTooltipGroup = new Map();\n    var allBarAndNotStacked = secondaryAxes.every(function (d) {\n      return d.elementType === 'bar' && !d.stacked;\n    });\n\n    var getInteractionPrimary = function getInteractionPrimary(datum) {\n      if (allBarAndNotStacked) {\n        var secondaryAxis = secondaryAxes.find(function (d) {\n          return d.id === datum.secondaryAxisId;\n        });\n\n        if (secondaryAxis.elementType === 'bar' && !secondaryAxis.stacked) {\n          return getPrimary(datum, primaryAxis, secondaryAxis);\n        }\n      }\n\n      return datum.primaryValue;\n    };\n\n    var getInteractionKey = function getInteractionKey(datum) {\n      return \"\" + getInteractionPrimary(datum);\n    };\n\n    var getTooltipKey = function getTooltipKey(datum) {\n      return \"\" + datum.primaryValue;\n    };\n\n    if (options.interactionMode === 'closest') {\n      getInteractionKey = function getInteractionKey(datum) {\n        return getInteractionPrimary(datum) + \"_\" + datum.secondaryValue;\n      };\n    }\n\n    if (tooltipOptions.groupingMode === 'single') {\n      getTooltipKey = function getTooltipKey(datum) {\n        return datum.primaryValue + \"_\" + datum.secondaryValue;\n      };\n    } else if (tooltipOptions.groupingMode === 'secondary') {\n      getTooltipKey = function getTooltipKey(datum) {\n        return \"\" + datum.secondaryValue;\n      };\n    } else if (tooltipOptions.groupingMode === 'series') {\n      getTooltipKey = function getTooltipKey(datum) {\n        return \"\" + datum.seriesIndex;\n      };\n    }\n\n    allDatums.forEach(function (datum) {\n      var interactionKey = getInteractionKey(datum);\n      var tooltipKey = getTooltipKey(datum);\n\n      if (!datumsByInteractionGroup.has(interactionKey)) {\n        datumsByInteractionGroup.set(interactionKey, []);\n      }\n\n      if (!datumsByTooltipGroup.has(tooltipKey)) {\n        datumsByTooltipGroup.set(tooltipKey, []);\n      }\n\n      datumsByInteractionGroup.get(interactionKey).push(datum);\n      datumsByTooltipGroup.get(tooltipKey).push(datum);\n    });\n    datumsByInteractionGroup.forEach(function (value, key) {\n      datumsByInteractionGroup.set(key, sortDatumsBySecondaryPx(value, secondaryAxes));\n    });\n    datumsByTooltipGroup.forEach(function (value, key) {\n      datumsByTooltipGroup.set(key, sortDatumsBySecondaryPx(value, secondaryAxes));\n    });\n    allDatums.forEach(function (datum) {\n      var interactionKey = getInteractionKey(datum);\n      var tooltipKey = getTooltipKey(datum);\n      datum.interactiveGroup = datumsByInteractionGroup.get(interactionKey);\n      datum.tooltipGroup = datumsByTooltipGroup.get(tooltipKey);\n    });\n    return [datumsByInteractionGroup, datumsByTooltipGroup];\n  }, [isInteracting, allDatums, options.interactionMode, primaryAxis, secondaryAxes, tooltipOptions.groupingMode]),\n      datumsByInteractionGroup = _React$useMemo[0],\n      datumsByTooltipGroup = _React$useMemo[1];\n\n  var getSeriesStatusStyle = React.useCallback(function (series, focusedDatum) {\n    var _getOptions$getSeries, _getOptions$getSeries2, _getOptions;\n\n    var base = {\n      color: getOptions().defaultColors[series.index % getOptions().defaultColors.length]\n    };\n    var status = getSeriesStatus(series, focusedDatum);\n    var statusStyles = (_getOptions$getSeries = (_getOptions$getSeries2 = (_getOptions = getOptions()).getSeriesStyle) == null ? void 0 : _getOptions$getSeries2.call(_getOptions, series, status)) != null ? _getOptions$getSeries : {};\n    series.style = materializeStyles(statusStyles, base);\n    return series.style;\n  }, [getOptions]);\n  var getDatumStatusStyle = React.useCallback(function (datum, focusedDatum) {\n    var _series$datum$seriesI, _getOptions$getDatumS, _getOptions$getDatumS2, _getOptions2;\n\n    var base = _extends({}, (_series$datum$seriesI = series[datum.seriesIndex]) == null ? void 0 : _series$datum$seriesI.style, {\n      color: getOptions().defaultColors[datum.seriesIndex % getOptions().defaultColors.length]\n    });\n\n    var status = getDatumStatus(datum, focusedDatum);\n    var statusStyles = (_getOptions$getDatumS = (_getOptions$getDatumS2 = (_getOptions2 = getOptions()).getDatumStyle) == null ? void 0 : _getOptions$getDatumS2.call(_getOptions2, datum, status)) != null ? _getOptions$getDatumS : {};\n    datum.style = materializeStyles(statusStyles, base);\n    return datum.style;\n  }, [getOptions, series]); // Reverse the stack order for proper z-indexing\n\n  var orderedSeries = React.useMemo(function () {\n    var reversedSeries = [].concat(series).reverse();\n    return getOptions().getSeriesOrder(reversedSeries);\n  }, [getOptions, series]);\n  useIsomorphicLayoutEffect(function () {\n    if (svgRef.current && svgRef.current.parentElement && !svgRef.current.parentElement.style.position) {\n      svgRef.current.parentElement.style.position = 'relative';\n    }\n  });\n  var contextValue = {\n    getOptions: getOptions,\n    gridDimensions: gridDimensions,\n    primaryAxis: primaryAxis,\n    secondaryAxes: secondaryAxes,\n    series: series,\n    orderedSeries: orderedSeries,\n    datumsByInteractionGroup: datumsByInteractionGroup,\n    datumsByTooltipGroup: datumsByTooltipGroup,\n    width: width,\n    height: height,\n    getSeriesStatusStyle: getSeriesStatusStyle,\n    getDatumStatusStyle: getDatumStatusStyle,\n    axisDimensionsState: axisDimensionsState,\n    focusedDatumState: focusedDatumState,\n    svgRef: svgRef,\n    isInteractingState: isInteractingState\n  };\n  var seriesByAxisId = React.useMemo(function () {\n    return sort(groups(orderedSeries, function (d) {\n      return d.secondaryAxisId;\n    }), function (_ref3) {\n      var key = _ref3[0];\n      return secondaryAxes.findIndex(function (axis) {\n        return axis.id === key;\n      });\n    });\n  }, [orderedSeries, secondaryAxes]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  var getSeriesInfo = function getSeriesInfo() {\n    return {\n      primaryAxis: primaryAxis,\n      secondaryAxes: secondaryAxes,\n      seriesByAxisId: seriesByAxisId\n    };\n  };\n\n  var getMemoizedSeriesInfo = React.useCallback(function () {\n    return {\n      primaryAxis: primaryAxis,\n      secondaryAxes: secondaryAxes,\n      seriesByAxisId: seriesByAxisId\n    };\n  }, [primaryAxis, secondaryAxes, seriesByAxisId]);\n\n  if (options.memoizeSeries) {\n    getSeriesInfo = getMemoizedSeriesInfo;\n  }\n\n  var seriesEl = React.useMemo(function () {\n    var _getSeriesInfo = getSeriesInfo(),\n        primaryAxis = _getSeriesInfo.primaryAxis,\n        secondaryAxes = _getSeriesInfo.secondaryAxes,\n        seriesByAxisId = _getSeriesInfo.seriesByAxisId;\n\n    return seriesByAxisId.map(function (_ref4) {\n      var axisId = _ref4[0],\n          series = _ref4[1];\n      var secondaryAxis = secondaryAxes.find(function (d) {\n        return d.id === axisId;\n      });\n\n      if (!secondaryAxis) {\n        return null;\n      }\n\n      var elementType = secondaryAxis.elementType;\n\n      var Component = function () {\n        if (elementType === 'line' || elementType === 'bubble' || elementType === 'area') {\n          return Line;\n        }\n\n        if (elementType === 'bar') {\n          return Bar;\n        }\n\n        throw new Error('Invalid elementType');\n      }();\n\n      if (primaryAxis.isInvalid || secondaryAxis.isInvalid) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(Component, {\n        key: axisId != null ? axisId : '__default__',\n        primaryAxis: primaryAxis,\n        secondaryAxis: secondaryAxis,\n        series: series\n      });\n    });\n  }, [getSeriesInfo]);\n  return /*#__PURE__*/React.createElement(ChartContextProvider, {\n    value: useGetLatest(contextValue)\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"svg\", {\n    ref: svgRef,\n    style: {\n      width: width,\n      height: height,\n      overflow: options.brush ? 'hidden' : 'visible'\n    },\n    onClick: function onClick(e) {\n      return options.onClickDatum == null ? void 0 : options.onClickDatum(focusedDatum, e);\n    },\n    onMouseEnter: function onMouseEnter() {\n      isInteractingState[1](true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      isInteractingState[1](false);\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    className: \"axes\"\n  }, [primaryAxis].concat(secondaryAxes).map(function (axis) {\n    return /*#__PURE__*/React.createElement(AxisLinear, _extends({\n      key: [axis.position, axis.id].join('')\n    }, axis));\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    className: \"Series\",\n    style: {\n      pointerEvents: 'none'\n    }\n  }, seriesEl), /*#__PURE__*/React.createElement(Voronoi, null), (_options$renderSVG = options.renderSVG == null ? void 0 : options.renderSVG()) != null ? _options$renderSVG : null), /*#__PURE__*/React.createElement(Cursors, null), /*#__PURE__*/React.createElement(Tooltip, null)));\n}\n\nfunction getFirstDefinedValue(options, data) {\n  var firstDefinedValue;\n  data.some(function (serie) {\n    return serie.data.some(function (originalDatum) {\n      var value = options.getValue(originalDatum);\n\n      if (value !== null && typeof value !== 'undefined') {\n        firstDefinedValue = value;\n        return true;\n      }\n    });\n  });\n  return firstDefinedValue;\n}\n\nfunction axisOptionsWithScaleType(options, firstValue) {\n  var scaleType = options.scaleType;\n\n  if (!options.scaleType) {\n    if (typeof firstValue === 'number') {\n      scaleType = 'linear';\n    } else if (typeof (firstValue == null ? void 0 : firstValue.getMonth) === 'function') {\n      scaleType = 'time';\n    } else if (typeof firstValue === 'string' || typeof firstValue === 'boolean') {\n      scaleType = 'band';\n    } else {\n      throw new Error('Invalid scale type: Unable to infer type from data');\n    }\n  }\n\n  return _extends({}, options, {\n    scaleType: scaleType\n  });\n}\n\nfunction sortDatumsBySecondaryPx(datums, secondaryAxes) {\n  return [].concat(datums).sort(function (a, b) {\n    var _aAxis$scale, _a$stackData, _bAxis$scale, _b$stackData;\n\n    var aAxis = secondaryAxes.find(function (d) {\n      return d.id === a.secondaryAxisId;\n    });\n    var bAxis = secondaryAxes.find(function (d) {\n      return d.id === b.secondaryAxisId;\n    });\n    var aPx = (_aAxis$scale = aAxis == null ? void 0 : aAxis.scale(aAxis.stacked ? (_a$stackData = a.stackData) == null ? void 0 : _a$stackData[1] : a.secondaryValue)) != null ? _aAxis$scale : NaN;\n    var bPx = (_bAxis$scale = bAxis == null ? void 0 : bAxis.scale(bAxis.stacked ? (_b$stackData = b.stackData) == null ? void 0 : _b$stackData[1] : b.secondaryValue)) != null ? _bAxis$scale : NaN;\n    return aPx - bPx;\n  });\n}","map":{"version":3,"names":["_createForOfIteratorHelperLoose","_objectWithoutPropertiesLoose","_extends","_excluded","groups","sort","sum","React","useGetLatest","useIsomorphicLayoutEffect","Bar","getPrimary","Line","materializeStyles","getSeriesStatus","getDatumStatus","buildAxisLinear","ChartContextProvider","AxisLinear","Cursors","Tooltip","defaultTooltip","Voronoi","defaultColorScheme","defaultPadding","defaultChartOptions","options","_options$initialWidth","_options$initialHeigh","_options$getSeriesOrd","_options$interactionM","_options$showVoronoi","_options$defaultColor","_options$useIntersect","_options$intersection","_options$primaryCurso","_options$secondaryCur","_options$padding","initialWidth","initialHeight","getSeriesOrder","series","interactionMode","showVoronoi","defaultColors","useIntersectionObserver","intersectionObserverRootMargin","primaryCursor","secondaryCursor","padding","Chart","_ref","userOptions","className","_ref$style","style","rest","_React$useState","useState","chartElement","setContainerElement","containerEl","parentElement","nearestScrollableParent","useMemo","run","el","grandParent","scrollHeight","clientHeight","_window$getComputedSt","window","getComputedStyle","overflow","includes","_React$useState2","width","height","_React$useState2$","setDims","computed","position","useEffect","observer","ResizeObserver","rect","getBoundingClientRect","styles","parseInt","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","observe","unobserve","_React$useState3","isIntersecting","setIsIntersecting","IntersectionObserver","entries","_iterator","_step","done","entry","value","root","rootMargin","createElement","ref","fontFamily","ChartInner","_ref2","_options2","_options$renderSVG","primaryAxis","Error","secondaryAxes","length","primaryAxisOptions","firstValue","getFirstDefinedValue","data","axisOptions","axisOptionsWithScaleType","secondaryAxesOptions","map","secondaryAxis","i","elementType","scaleType","stacked","tooltipOptions","_options","_tooltipOptions$group","tooltip","groupingMode","svgRef","useRef","getOptions","axisDimensionsState","left","right","top","bottom","axisDimensions","isInteractingState","isInteracting","focusedDatumState","focusedDatum","gridDimensions","_options$padding$left","_options$padding$righ","_options$padding$bott","_options$padding$top","Math","max","Object","values","d","paddingLeft","paddingTop","paddingRight","paddingBottom","gridWidth","gridHeight","indicesByAxisId","seriesIndex","_originalSeries$id","_originalSeries$label","_indicesByAxisId$","originalSeries","seriesId","id","seriesLabel","label","secondaryAxisId","originalDatums","datums","seriesIndexPerAxis","datumIndex","originalDatum","index","indexPerAxis","allDatums","s","flat","_React$useMemo","Map","datumsByInteractionGroup","datumsByTooltipGroup","allBarAndNotStacked","every","getInteractionPrimary","datum","find","primaryValue","getInteractionKey","getTooltipKey","secondaryValue","forEach","interactionKey","tooltipKey","has","set","get","push","key","sortDatumsBySecondaryPx","interactiveGroup","tooltipGroup","getSeriesStatusStyle","useCallback","_getOptions$getSeries","_getOptions$getSeries2","_getOptions","base","color","status","statusStyles","getSeriesStyle","call","getDatumStatusStyle","_series$datum$seriesI","_getOptions$getDatumS","_getOptions$getDatumS2","_getOptions2","getDatumStyle","orderedSeries","reversedSeries","concat","reverse","current","contextValue","seriesByAxisId","_ref3","findIndex","axis","getSeriesInfo","getMemoizedSeriesInfo","memoizeSeries","seriesEl","_getSeriesInfo","_ref4","axisId","Component","isInvalid","brush","onClick","e","onClickDatum","onMouseEnter","onMouseLeave","join","pointerEvents","renderSVG","firstDefinedValue","some","serie","getValue","getMonth","a","b","_aAxis$scale","_a$stackData","_bAxis$scale","_b$stackData","aAxis","bAxis","aPx","scale","stackData","NaN","bPx"],"sources":["/Users/ryanmarr/Documents/Quantitative-Analysis-Site-ws/Quantitative_Analysis_Site/frontend/node_modules/react-charts/es/components/Chart.js"],"sourcesContent":["import _createForOfIteratorHelperLoose from \"@babel/runtime/helpers/esm/createForOfIteratorHelperLoose\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"options\", \"className\", \"style\"];\nimport { groups, sort, sum } from 'd3-array';\nimport React from 'react';\nimport useGetLatest from '../hooks/useGetLatest';\nimport useIsomorphicLayoutEffect from '../hooks/useIsomorphicLayoutEffect';\nimport Bar, { getPrimary } from '../seriesTypes/Bar';\nimport Line from '../seriesTypes/Line'; //\n\nimport { materializeStyles, getSeriesStatus, getDatumStatus } from '../utils/Utils';\nimport buildAxisLinear from '../utils/buildAxis.linear';\nimport { ChartContextProvider } from '../utils/chartContext';\nimport AxisLinear from './AxisLinear'; // import Brush from './Brush'\n\nimport Cursors from './Cursors';\nimport Tooltip, { defaultTooltip } from './Tooltip';\nimport Voronoi from './Voronoi'; //\n//\n\nvar defaultColorScheme = ['#0f83ab', '#faa43a', '#fd6868', '#53cfc9', '#a2d925', '#decf3f', '#734fe9', '#cd82ad', '#006d92', '#de7c00', '#f33232', '#3f9a80', '#53c200', '#d7af00', '#4c26c9', '#d44d99'];\nvar defaultPadding = 5;\n\nfunction defaultChartOptions(options) {\n  var _options$initialWidth, _options$initialHeigh, _options$getSeriesOrd, _options$interactionM, _options$showVoronoi, _options$defaultColor, _options$useIntersect, _options$intersection, _options$primaryCurso, _options$secondaryCur, _options$padding;\n\n  return _extends({}, options, {\n    initialWidth: (_options$initialWidth = options.initialWidth) != null ? _options$initialWidth : 300,\n    initialHeight: (_options$initialHeigh = options.initialHeight) != null ? _options$initialHeigh : 200,\n    getSeriesOrder: (_options$getSeriesOrd = options.getSeriesOrder) != null ? _options$getSeriesOrd : function (series) {\n      return series;\n    },\n    interactionMode: (_options$interactionM = options.interactionMode) != null ? _options$interactionM : 'primary',\n    showVoronoi: (_options$showVoronoi = options.showVoronoi) != null ? _options$showVoronoi : false,\n    defaultColors: (_options$defaultColor = options.defaultColors) != null ? _options$defaultColor : defaultColorScheme,\n    useIntersectionObserver: (_options$useIntersect = options.useIntersectionObserver) != null ? _options$useIntersect : false,\n    intersectionObserverRootMargin: (_options$intersection = options.intersectionObserverRootMargin) != null ? _options$intersection : '1000px',\n    primaryCursor: (_options$primaryCurso = options.primaryCursor) != null ? _options$primaryCurso : true,\n    secondaryCursor: (_options$secondaryCur = options.secondaryCursor) != null ? _options$secondaryCur : true,\n    padding: (_options$padding = options.padding) != null ? _options$padding : defaultPadding\n  });\n}\n\nexport function Chart(_ref) {\n  var userOptions = _ref.options,\n      className = _ref.className,\n      _ref$style = _ref.style,\n      style = _ref$style === void 0 ? {} : _ref$style,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var options = defaultChartOptions(userOptions);\n\n  var _React$useState = React.useState(null),\n      chartElement = _React$useState[0],\n      setContainerElement = _React$useState[1];\n\n  var containerEl = chartElement == null ? void 0 : chartElement.parentElement;\n  var nearestScrollableParent = React.useMemo(function () {\n    var run = function run(el) {\n      if (!el) {\n        return null;\n      }\n\n      var grandParent = el.parentElement;\n\n      if (!grandParent) {\n        return null;\n      }\n\n      if (grandParent.scrollHeight > grandParent.clientHeight) {\n        var _window$getComputedSt = window.getComputedStyle(grandParent),\n            overflow = _window$getComputedSt.overflow;\n\n        if (overflow.includes('scroll') || overflow.includes('auto')) {\n          return grandParent;\n        }\n      }\n\n      return run(grandParent);\n    };\n\n    return run(containerEl);\n  }, [containerEl]);\n\n  var _React$useState2 = React.useState({\n    width: options.initialWidth,\n    height: options.initialHeight\n  }),\n      _React$useState2$ = _React$useState2[0],\n      width = _React$useState2$.width,\n      height = _React$useState2$.height,\n      setDims = _React$useState2[1];\n\n  useIsomorphicLayoutEffect(function () {\n    if (containerEl) {\n      var computed = window.getComputedStyle(containerEl);\n\n      if (!['relative', 'absolute', 'fixed'].includes(computed.position)) {\n        containerEl.style.position = 'relative';\n      }\n    }\n  }, [containerEl]);\n  React.useEffect(function () {\n    if (!containerEl) {\n      return;\n    }\n\n    var observer = new ResizeObserver(function () {\n      var rect = containerEl == null ? void 0 : containerEl.getBoundingClientRect();\n      var styles = window.getComputedStyle(containerEl);\n\n      if (rect) {\n        setDims({\n          width: rect.width - parseInt(styles.borderLeftWidth) - parseInt(styles.borderRightWidth),\n          height: rect.height - parseInt(styles.borderTopWidth) - parseInt(styles.borderBottomWidth)\n        });\n      }\n    });\n    observer.observe(containerEl);\n    return function () {\n      observer.unobserve(containerEl);\n    };\n  }, [containerEl]);\n\n  var _React$useState3 = React.useState(true),\n      isIntersecting = _React$useState3[0],\n      setIsIntersecting = _React$useState3[1];\n\n  React.useEffect(function () {\n    if (!containerEl || !options.useIntersectionObserver) return;\n    var observer = new IntersectionObserver(function (entries) {\n      for (var _iterator = _createForOfIteratorHelperLoose(entries), _step; !(_step = _iterator()).done;) {\n        var entry = _step.value;\n\n        if (entry.isIntersecting) {\n          setIsIntersecting(true);\n        } else {\n          setIsIntersecting(false);\n        }\n      }\n    }, {\n      root: nearestScrollableParent,\n      rootMargin: options.intersectionObserverRootMargin\n    });\n    observer.observe(containerEl);\n    return function () {\n      observer.unobserve(containerEl);\n    };\n  }, [containerEl, nearestScrollableParent, options.intersectionObserverRootMargin, options.useIntersectionObserver]);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: setContainerElement\n  }, rest, {\n    className: \"ReactChart \" + (className || ''),\n    style: _extends({\n      fontFamily: 'sans-serif'\n    }, style, {\n      position: 'absolute',\n      width: width,\n      height: height\n    })\n  }), options.useIntersectionObserver && !isIntersecting ? null : /*#__PURE__*/React.createElement(ChartInner, {\n    options: options,\n    width: width,\n    height: height\n  }));\n}\n\nfunction ChartInner(_ref2) {\n  var _options2, _options$renderSVG;\n\n  var options = _ref2.options,\n      width = _ref2.width,\n      height = _ref2.height;\n\n  if (!options.primaryAxis) {\n    throw new Error('A primaryAxis is required');\n  }\n\n  if (!options.secondaryAxes.length) {\n    throw new Error('At least one secondaryAxis is required');\n  }\n\n  var primaryAxisOptions = React.useMemo(function () {\n    var firstValue = getFirstDefinedValue(options.primaryAxis, options.data);\n    var axisOptions = axisOptionsWithScaleType(options.primaryAxis, firstValue);\n    return _extends({\n      position: 'bottom'\n    }, axisOptions);\n  }, [options.data, options.primaryAxis]);\n  var secondaryAxesOptions = React.useMemo(function () {\n    return options.secondaryAxes.map(function (secondaryAxis, i) {\n      var firstValue = getFirstDefinedValue(secondaryAxis, options.data);\n      var axisOptions = axisOptionsWithScaleType(secondaryAxis, firstValue);\n\n      if (!axisOptions.elementType) {\n        if (primaryAxisOptions.scaleType === 'band') {\n          axisOptions.elementType = 'bar';\n        } else if (axisOptions.stacked) {\n          axisOptions.elementType = 'area';\n        }\n      }\n\n      if (typeof axisOptions.stacked === 'undefined' && axisOptions.elementType && ['area'].includes(axisOptions.elementType)) {\n        axisOptions.stacked = true;\n      }\n\n      return _extends({\n        position: !i ? 'left' : 'right'\n      }, axisOptions);\n    });\n  }, [options.data, options.secondaryAxes, primaryAxisOptions]); // Resolve Tooltip Option\n\n  var tooltipOptions = React.useMemo(function () {\n    var _options, _tooltipOptions$group;\n\n    var tooltipOptions = defaultTooltip((_options = options) == null ? void 0 : _options.tooltip);\n    tooltipOptions.groupingMode = (_tooltipOptions$group = tooltipOptions.groupingMode) != null ? _tooltipOptions$group : function () {\n      if (options.interactionMode === 'closest') {\n        return 'single';\n      }\n\n      return 'primary';\n    }();\n    return tooltipOptions;\n  }, [options.interactionMode, (_options2 = options) == null ? void 0 : _options2.tooltip]);\n  options = _extends({}, options, {\n    tooltip: tooltipOptions\n  }); //\n\n  var svgRef = React.useRef(null);\n  var getOptions = useGetLatest(_extends({}, options, {\n    tooltip: tooltipOptions\n  }));\n  var axisDimensionsState = React.useState({\n    left: {},\n    right: {},\n    top: {},\n    bottom: {}\n  });\n  var axisDimensions = axisDimensionsState[0];\n  var isInteractingState = React.useState(false);\n  var isInteracting = isInteractingState[0];\n  var focusedDatumState = React.useState(null);\n  var focusedDatum = focusedDatumState[0]; // useAtom<Datum<TDatum> | null>(focusedDatumAtom)\n\n  var gridDimensions = React.useMemo(function () {\n    var _options$padding$left, _options$padding$righ, _options$padding$bott, _options$padding$top;\n\n    var padding = {\n      left: typeof options.padding === 'object' ? (_options$padding$left = options.padding.left) != null ? _options$padding$left : defaultPadding : options.padding,\n      right: typeof options.padding === 'object' ? (_options$padding$righ = options.padding.right) != null ? _options$padding$righ : defaultPadding : options.padding,\n      bottom: typeof options.padding === 'object' ? (_options$padding$bott = options.padding.bottom) != null ? _options$padding$bott : defaultPadding : options.padding,\n      top: typeof options.padding === 'object' ? (_options$padding$top = options.padding.top) != null ? _options$padding$top : defaultPadding : options.padding\n    };\n    var left = padding.left + Math.max(sum(Object.values(axisDimensions.left), function (d) {\n      return d.width;\n    }), sum(Object.values(axisDimensions.top), function (d) {\n      return d.paddingLeft;\n    }), sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.paddingLeft;\n    }));\n    var top = padding.top + Math.max(sum(Object.values(axisDimensions.top), function (d) {\n      return d.height;\n    }), sum(Object.values(axisDimensions.left), function (d) {\n      return d.paddingTop;\n    }), sum(Object.values(axisDimensions.right), function (d) {\n      return d.paddingTop;\n    }));\n    var right = padding.right + Math.max(sum(Object.values(axisDimensions.right), function (d) {\n      return d.width;\n    }), sum(Object.values(axisDimensions.top), function (d) {\n      return d.paddingRight;\n    }), sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.paddingRight;\n    }));\n    var bottom = padding.bottom + Math.max(sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.height;\n    }), sum(Object.values(axisDimensions.left), function (d) {\n      return d.paddingBottom;\n    }), sum(Object.values(axisDimensions.right), function (d) {\n      return d.paddingBottom;\n    }));\n    var gridWidth = Math.max(0, width - left - right);\n    var gridHeight = Math.max(0, height - top - bottom);\n    return {\n      left: left,\n      top: top,\n      right: right,\n      bottom: bottom,\n      width: gridWidth,\n      height: gridHeight\n    };\n  }, [options.padding, axisDimensions.left, axisDimensions.top, axisDimensions.bottom, axisDimensions.right, width, height]);\n  var series = React.useMemo(function () {\n    var series = [];\n    var indicesByAxisId = {};\n\n    for (var seriesIndex = 0; seriesIndex < options.data.length; seriesIndex++) {\n      var _originalSeries$id, _originalSeries$label, _indicesByAxisId$;\n\n      var originalSeries = options.data[seriesIndex];\n      var seriesId = (_originalSeries$id = originalSeries.id) != null ? _originalSeries$id : seriesIndex + '';\n      var seriesLabel = (_originalSeries$label = originalSeries.label) != null ? _originalSeries$label : \"Series \" + (seriesIndex + 1);\n      var secondaryAxisId = originalSeries.secondaryAxisId;\n      var originalDatums = originalSeries.data;\n      var datums = [];\n      indicesByAxisId[\"\" + secondaryAxisId] = (_indicesByAxisId$ = indicesByAxisId[\"\" + secondaryAxisId]) != null ? _indicesByAxisId$ : 0;\n      var seriesIndexPerAxis = indicesByAxisId[\"\" + secondaryAxisId];\n      indicesByAxisId[\"\" + secondaryAxisId]++;\n\n      for (var datumIndex = 0; datumIndex < originalDatums.length; datumIndex++) {\n        var originalDatum = originalDatums[datumIndex];\n        datums[datumIndex] = {\n          originalSeries: originalSeries,\n          seriesIndex: seriesIndex,\n          seriesIndexPerAxis: seriesIndexPerAxis,\n          seriesId: seriesId,\n          seriesLabel: seriesLabel,\n          secondaryAxisId: secondaryAxisId,\n          index: datumIndex,\n          originalDatum: originalDatum\n        };\n      }\n\n      series[seriesIndex] = {\n        originalSeries: originalSeries,\n        index: seriesIndex,\n        id: seriesId,\n        label: seriesLabel,\n        indexPerAxis: seriesIndexPerAxis,\n        secondaryAxisId: secondaryAxisId,\n        datums: datums\n      };\n    }\n\n    return series;\n  }, [options.data]);\n  var allDatums = React.useMemo(function () {\n    return series.map(function (s) {\n      return s.datums;\n    }).flat(2);\n  }, [series]);\n  var primaryAxis = React.useMemo(function () {\n    return buildAxisLinear(true, primaryAxisOptions, series, allDatums, gridDimensions, width, height);\n  }, [allDatums, gridDimensions, height, primaryAxisOptions, series, width]);\n  var secondaryAxes = React.useMemo(function () {\n    return secondaryAxesOptions.map(function (secondaryAxis) {\n      return buildAxisLinear(false, secondaryAxis, series, allDatums, gridDimensions, width, height);\n    });\n  }, [allDatums, gridDimensions, height, secondaryAxesOptions, series, width]);\n\n  var _React$useMemo = React.useMemo(function () {\n    if (!isInteracting) {\n      return [new Map(), new Map()];\n    }\n\n    var datumsByInteractionGroup = new Map();\n    var datumsByTooltipGroup = new Map();\n    var allBarAndNotStacked = secondaryAxes.every(function (d) {\n      return d.elementType === 'bar' && !d.stacked;\n    });\n\n    var getInteractionPrimary = function getInteractionPrimary(datum) {\n      if (allBarAndNotStacked) {\n        var secondaryAxis = secondaryAxes.find(function (d) {\n          return d.id === datum.secondaryAxisId;\n        });\n\n        if (secondaryAxis.elementType === 'bar' && !secondaryAxis.stacked) {\n          return getPrimary(datum, primaryAxis, secondaryAxis);\n        }\n      }\n\n      return datum.primaryValue;\n    };\n\n    var getInteractionKey = function getInteractionKey(datum) {\n      return \"\" + getInteractionPrimary(datum);\n    };\n\n    var getTooltipKey = function getTooltipKey(datum) {\n      return \"\" + datum.primaryValue;\n    };\n\n    if (options.interactionMode === 'closest') {\n      getInteractionKey = function getInteractionKey(datum) {\n        return getInteractionPrimary(datum) + \"_\" + datum.secondaryValue;\n      };\n    }\n\n    if (tooltipOptions.groupingMode === 'single') {\n      getTooltipKey = function getTooltipKey(datum) {\n        return datum.primaryValue + \"_\" + datum.secondaryValue;\n      };\n    } else if (tooltipOptions.groupingMode === 'secondary') {\n      getTooltipKey = function getTooltipKey(datum) {\n        return \"\" + datum.secondaryValue;\n      };\n    } else if (tooltipOptions.groupingMode === 'series') {\n      getTooltipKey = function getTooltipKey(datum) {\n        return \"\" + datum.seriesIndex;\n      };\n    }\n\n    allDatums.forEach(function (datum) {\n      var interactionKey = getInteractionKey(datum);\n      var tooltipKey = getTooltipKey(datum);\n\n      if (!datumsByInteractionGroup.has(interactionKey)) {\n        datumsByInteractionGroup.set(interactionKey, []);\n      }\n\n      if (!datumsByTooltipGroup.has(tooltipKey)) {\n        datumsByTooltipGroup.set(tooltipKey, []);\n      }\n\n      datumsByInteractionGroup.get(interactionKey).push(datum);\n      datumsByTooltipGroup.get(tooltipKey).push(datum);\n    });\n    datumsByInteractionGroup.forEach(function (value, key) {\n      datumsByInteractionGroup.set(key, sortDatumsBySecondaryPx(value, secondaryAxes));\n    });\n    datumsByTooltipGroup.forEach(function (value, key) {\n      datumsByTooltipGroup.set(key, sortDatumsBySecondaryPx(value, secondaryAxes));\n    });\n    allDatums.forEach(function (datum) {\n      var interactionKey = getInteractionKey(datum);\n      var tooltipKey = getTooltipKey(datum);\n      datum.interactiveGroup = datumsByInteractionGroup.get(interactionKey);\n      datum.tooltipGroup = datumsByTooltipGroup.get(tooltipKey);\n    });\n    return [datumsByInteractionGroup, datumsByTooltipGroup];\n  }, [isInteracting, allDatums, options.interactionMode, primaryAxis, secondaryAxes, tooltipOptions.groupingMode]),\n      datumsByInteractionGroup = _React$useMemo[0],\n      datumsByTooltipGroup = _React$useMemo[1];\n\n  var getSeriesStatusStyle = React.useCallback(function (series, focusedDatum) {\n    var _getOptions$getSeries, _getOptions$getSeries2, _getOptions;\n\n    var base = {\n      color: getOptions().defaultColors[series.index % getOptions().defaultColors.length]\n    };\n    var status = getSeriesStatus(series, focusedDatum);\n    var statusStyles = (_getOptions$getSeries = (_getOptions$getSeries2 = (_getOptions = getOptions()).getSeriesStyle) == null ? void 0 : _getOptions$getSeries2.call(_getOptions, series, status)) != null ? _getOptions$getSeries : {};\n    series.style = materializeStyles(statusStyles, base);\n    return series.style;\n  }, [getOptions]);\n  var getDatumStatusStyle = React.useCallback(function (datum, focusedDatum) {\n    var _series$datum$seriesI, _getOptions$getDatumS, _getOptions$getDatumS2, _getOptions2;\n\n    var base = _extends({}, (_series$datum$seriesI = series[datum.seriesIndex]) == null ? void 0 : _series$datum$seriesI.style, {\n      color: getOptions().defaultColors[datum.seriesIndex % getOptions().defaultColors.length]\n    });\n\n    var status = getDatumStatus(datum, focusedDatum);\n    var statusStyles = (_getOptions$getDatumS = (_getOptions$getDatumS2 = (_getOptions2 = getOptions()).getDatumStyle) == null ? void 0 : _getOptions$getDatumS2.call(_getOptions2, datum, status)) != null ? _getOptions$getDatumS : {};\n    datum.style = materializeStyles(statusStyles, base);\n    return datum.style;\n  }, [getOptions, series]); // Reverse the stack order for proper z-indexing\n\n  var orderedSeries = React.useMemo(function () {\n    var reversedSeries = [].concat(series).reverse();\n    return getOptions().getSeriesOrder(reversedSeries);\n  }, [getOptions, series]);\n  useIsomorphicLayoutEffect(function () {\n    if (svgRef.current && svgRef.current.parentElement && !svgRef.current.parentElement.style.position) {\n      svgRef.current.parentElement.style.position = 'relative';\n    }\n  });\n  var contextValue = {\n    getOptions: getOptions,\n    gridDimensions: gridDimensions,\n    primaryAxis: primaryAxis,\n    secondaryAxes: secondaryAxes,\n    series: series,\n    orderedSeries: orderedSeries,\n    datumsByInteractionGroup: datumsByInteractionGroup,\n    datumsByTooltipGroup: datumsByTooltipGroup,\n    width: width,\n    height: height,\n    getSeriesStatusStyle: getSeriesStatusStyle,\n    getDatumStatusStyle: getDatumStatusStyle,\n    axisDimensionsState: axisDimensionsState,\n    focusedDatumState: focusedDatumState,\n    svgRef: svgRef,\n    isInteractingState: isInteractingState\n  };\n  var seriesByAxisId = React.useMemo(function () {\n    return sort(groups(orderedSeries, function (d) {\n      return d.secondaryAxisId;\n    }), function (_ref3) {\n      var key = _ref3[0];\n      return secondaryAxes.findIndex(function (axis) {\n        return axis.id === key;\n      });\n    });\n  }, [orderedSeries, secondaryAxes]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  var getSeriesInfo = function getSeriesInfo() {\n    return {\n      primaryAxis: primaryAxis,\n      secondaryAxes: secondaryAxes,\n      seriesByAxisId: seriesByAxisId\n    };\n  };\n\n  var getMemoizedSeriesInfo = React.useCallback(function () {\n    return {\n      primaryAxis: primaryAxis,\n      secondaryAxes: secondaryAxes,\n      seriesByAxisId: seriesByAxisId\n    };\n  }, [primaryAxis, secondaryAxes, seriesByAxisId]);\n\n  if (options.memoizeSeries) {\n    getSeriesInfo = getMemoizedSeriesInfo;\n  }\n\n  var seriesEl = React.useMemo(function () {\n    var _getSeriesInfo = getSeriesInfo(),\n        primaryAxis = _getSeriesInfo.primaryAxis,\n        secondaryAxes = _getSeriesInfo.secondaryAxes,\n        seriesByAxisId = _getSeriesInfo.seriesByAxisId;\n\n    return seriesByAxisId.map(function (_ref4) {\n      var axisId = _ref4[0],\n          series = _ref4[1];\n      var secondaryAxis = secondaryAxes.find(function (d) {\n        return d.id === axisId;\n      });\n\n      if (!secondaryAxis) {\n        return null;\n      }\n\n      var elementType = secondaryAxis.elementType;\n\n      var Component = function () {\n        if (elementType === 'line' || elementType === 'bubble' || elementType === 'area') {\n          return Line;\n        }\n\n        if (elementType === 'bar') {\n          return Bar;\n        }\n\n        throw new Error('Invalid elementType');\n      }();\n\n      if (primaryAxis.isInvalid || secondaryAxis.isInvalid) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(Component, {\n        key: axisId != null ? axisId : '__default__',\n        primaryAxis: primaryAxis,\n        secondaryAxis: secondaryAxis,\n        series: series\n      });\n    });\n  }, [getSeriesInfo]);\n  return /*#__PURE__*/React.createElement(ChartContextProvider, {\n    value: useGetLatest(contextValue)\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"svg\", {\n    ref: svgRef,\n    style: {\n      width: width,\n      height: height,\n      overflow: options.brush ? 'hidden' : 'visible'\n    },\n    onClick: function onClick(e) {\n      return options.onClickDatum == null ? void 0 : options.onClickDatum(focusedDatum, e);\n    },\n    onMouseEnter: function onMouseEnter() {\n      isInteractingState[1](true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      isInteractingState[1](false);\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    className: \"axes\"\n  }, [primaryAxis].concat(secondaryAxes).map(function (axis) {\n    return /*#__PURE__*/React.createElement(AxisLinear, _extends({\n      key: [axis.position, axis.id].join('')\n    }, axis));\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    className: \"Series\",\n    style: {\n      pointerEvents: 'none'\n    }\n  }, seriesEl), /*#__PURE__*/React.createElement(Voronoi, null), (_options$renderSVG = options.renderSVG == null ? void 0 : options.renderSVG()) != null ? _options$renderSVG : null), /*#__PURE__*/React.createElement(Cursors, null), /*#__PURE__*/React.createElement(Tooltip, null)));\n}\n\nfunction getFirstDefinedValue(options, data) {\n  var firstDefinedValue;\n  data.some(function (serie) {\n    return serie.data.some(function (originalDatum) {\n      var value = options.getValue(originalDatum);\n\n      if (value !== null && typeof value !== 'undefined') {\n        firstDefinedValue = value;\n        return true;\n      }\n    });\n  });\n  return firstDefinedValue;\n}\n\nfunction axisOptionsWithScaleType(options, firstValue) {\n  var scaleType = options.scaleType;\n\n  if (!options.scaleType) {\n    if (typeof firstValue === 'number') {\n      scaleType = 'linear';\n    } else if (typeof (firstValue == null ? void 0 : firstValue.getMonth) === 'function') {\n      scaleType = 'time';\n    } else if (typeof firstValue === 'string' || typeof firstValue === 'boolean') {\n      scaleType = 'band';\n    } else {\n      throw new Error('Invalid scale type: Unable to infer type from data');\n    }\n  }\n\n  return _extends({}, options, {\n    scaleType: scaleType\n  });\n}\n\nfunction sortDatumsBySecondaryPx(datums, secondaryAxes) {\n  return [].concat(datums).sort(function (a, b) {\n    var _aAxis$scale, _a$stackData, _bAxis$scale, _b$stackData;\n\n    var aAxis = secondaryAxes.find(function (d) {\n      return d.id === a.secondaryAxisId;\n    });\n    var bAxis = secondaryAxes.find(function (d) {\n      return d.id === b.secondaryAxisId;\n    });\n    var aPx = (_aAxis$scale = aAxis == null ? void 0 : aAxis.scale(aAxis.stacked ? (_a$stackData = a.stackData) == null ? void 0 : _a$stackData[1] : a.secondaryValue)) != null ? _aAxis$scale : NaN;\n    var bPx = (_bAxis$scale = bAxis == null ? void 0 : bAxis.scale(bAxis.stacked ? (_b$stackData = b.stackData) == null ? void 0 : _b$stackData[1] : b.secondaryValue)) != null ? _bAxis$scale : NaN;\n    return aPx - bPx;\n  });\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}